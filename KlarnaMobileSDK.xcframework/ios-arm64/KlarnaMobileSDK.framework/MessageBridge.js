function $parcel$export(e,t,r,a){Object.defineProperty(e,t,{get:r,set:a,enumerable:!0,configurable:!0})}function $cd80bf694d0631b1$export$71511d61b312f219(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $62cc9eefa616c344$var$_defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function $62cc9eefa616c344$export$71511d61b312f219(e,t,r){return t&&$62cc9eefa616c344$var$_defineProperties(e.prototype,t),r&&$62cc9eefa616c344$var$_defineProperties(e,r),e}var $54e9de874e7cf259$export$468fbe6771f1699e=function e(t,r,a,o){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.action=t,this.receiverName=r,this.message=a,this.bridgeData=o},$e27faf65630ebc9a$export$e12b769011d096b4=function e(t,r,a){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.bridgeVersion=t,this.endpoints={analytics:r,deviceInfo:a}},$f12b5d7f8ad4b8dc$export$33b0bc6879c27206=function e(t,r){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.staging=t,this.production=r},$a527415fb53b3e91$export$eed022e50baffed5={Analytics:{Staging:"evt-eu.staging.eu1.yaco.klarna.net",Production:"not-reallly-evt.klarna.com"},DeviceData:{Staging:"devicedata-staging.klarna",Production:"devicedata-production.klarna"}},$b4efb1694e6b9d0a$export$a96b0bbdbd70b734=(e=>(e.ReceiverAdded="ReceiverAdded",e.ReceiverRemoved="ReceiverRemoved",e.MessagePosted="MessagePosted",e.EndpointsReported="EndpointsReported",e.MessageBridgeWillStart="MessageBridgeWillStart",e.MessageBridgeAlreadyRunning="MessageBridgeAlreadyRunning",e))({});function $263e4d1ab7ddd93a$export$71511d61b312f219(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function $23cfc4b678f7be21$export$71511d61b312f219(e){if(Array.isArray(e))return $263e4d1ab7ddd93a$export$71511d61b312f219(e)}function $563f113198c86e6e$export$71511d61b312f219(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function $5eb0f827a401b1b3$export$71511d61b312f219(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $6c065eef3d36ea62$export$71511d61b312f219(e,t){var r;if(e)return"string"==typeof e?$263e4d1ab7ddd93a$export$71511d61b312f219(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$263e4d1ab7ddd93a$export$71511d61b312f219(e,t):void 0}function $7b042ade928b542b$export$71511d61b312f219(e){return $23cfc4b678f7be21$export$71511d61b312f219(e)||$563f113198c86e6e$export$71511d61b312f219(e)||$6c065eef3d36ea62$export$71511d61b312f219(e)||$5eb0f827a401b1b3$export$71511d61b312f219()}var $0f3b9fcdcc260be5$var$_class,$dc2b35112bcce9e2$export$243e62d78d3b544d=(e=>(e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.None=4]="None",e))({}),$dc2b35112bcce9e2$export$efa9a398d6368992=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.level=4,this.delegate=null}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"debug",value:function(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];try{0===this.level&&(null!=this.delegate&&this.delegate.logDebug(this._stringifyParams(r)),(e=console).log.apply(e,$7b042ade928b542b$export$71511d61b312f219(r)))}catch(e){}}},{key:"info",value:function(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];try{this.level<=1&&(null!=this.delegate&&this.delegate.logDebug(this._stringifyParams(r)),(e=console).info.apply(e,$7b042ade928b542b$export$71511d61b312f219(r)))}catch(e){}}},{key:"warn",value:function(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];try{this.level<=2&&(null!=this.delegate&&this.delegate.logDebug(this._stringifyParams(r)),(e=console).warn.apply(e,$7b042ade928b542b$export$71511d61b312f219(r)))}catch(e){}}},{key:"error",value:function(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];try{this.level<=3&&(null!=this.delegate&&this.delegate.logError(this._stringifyParams(r)),(e=console).error.apply(e,$7b042ade928b542b$export$71511d61b312f219(r)))}catch(e){}}},{key:"_stringifyParams",value:function(e){try{return JSON.stringify(e,null,2)}catch(e){return"Couldn't stringify logging params."}}}]),e})(),$86c5e230eba4f632$export$d2ca453b913dcdea=($dc2b35112bcce9e2$export$efa9a398d6368992.default=new $dc2b35112bcce9e2$export$efa9a398d6368992,(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,null,[{key:"getHandshakeResponseParams",value:function(e,t){return e.handshakeResponseParamsMap[t]}},{key:"compareVersion",value:function(e,t){for(var r=e.split("-")[0].replace("v","").split(".").map(function(e){e=parseInt(e,10);return isNaN(e)?0:e});r.length<3;)r.push(0);for(var a=t.split("-")[0].replace("v","").split(".").map(function(e){e=parseInt(e,10);return isNaN(e)?0:e});a.length<3;)a.push(0);return r[0]>a[0]?1:r[0]<a[0]?-1:r[1]>a[1]?1:r[1]<a[1]?-1:r[2]>a[2]?1:r[2]<a[2]?-1:0}},{key:"createUUIDv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},{key:"randomizeInteger",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e5;return Math.floor(Math.random()*e)}},{key:"replaceBridge",value:function(e,r){$dc2b35112bcce9e2$export$efa9a398d6368992.default.info("Replacing old bridge",e);var t=e.receivers,a=e.queuedMessages,o=e.eventListeners,n=e.handshakeResponseParamsMap,d=e.queuedKlarnaPaymentsMessages;if(r.notifyEvent({name:"WillReplaceNativeHook",payload:{oldMessageBridgeVersion:e.version,newMessageBridgeVersion:r.version,receivers:t.toString(),queuedMessages:a.toString(),nativeReady:e.nativeReady.toString()}}),(window.__KlarnaNativeHook=r).notifyEvent({name:"ReplacedNativeHook",payload:{oldMessageBridgeVersion:e.version,newMessageBridgeVersion:r.version}}),e.destroy&&e.destroy(),null!=o&&o.forEach(function(e){return r.addEventListener(e)}),null!=n)if(n.forEach)n.forEach(function(e,t){r.handshakeResponseParamsMap[t]=e});else for(var s in n)r.handshakeResponseParamsMap[s]=n[s];a.forEach(function(e){return r.queuedMessages.push(e)}),t.forEach(function(e){return r.addReceiver(e.name,e.callback)}),void 0!==d&&d.forEach(function(e){return r.queuedKlarnaPaymentsMessages.push(e)}),e.nativeReady&&r.setNativeReady(),$dc2b35112bcce9e2$export$efa9a398d6368992.default.info("Replaced old bridge",r)}}]),e})()),$e46f7c82eed16cd3$export$5e8778959ee066ba="klarna-base-64-utf8::",$e46f7c82eed16cd3$export$3ab5d4b363e83ecc="v1.5.0-40798d1b579",$e46f7c82eed16cd3$export$6f861d09917a31b9="https://eu.klarnaevt.com",$ab11a08eff1af618$export$3b418aac0e066580=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"overrideDefaults",value:function(){var r,e;null!=window.defaultAtob&&null!=window.sdkAtob?$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("Already installed custom atob(). Skipping."):(r=window.atob,window.atob=e=function(t){if(0!==t.indexOf($e46f7c82eed16cd3$export$5e8778959ee066ba))return r(t);t=t.substr($e46f7c82eed16cd3$export$5e8778959ee066ba.length);try{return decodeURIComponent(atob(t).split("").map(function(e){return null==(e=e.charCodeAt(0).toString(16).match(/.{1,2}/g))?void 0:e.map(function(e){return"%"+("00"+e).slice(-2)}).join("")}).join(""))}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("atob-custom",{"src-string":t,msg:e.toString()});try{return r(t)}catch(e){throw $dc2b35112bcce9e2$export$efa9a398d6368992.default.error("atob-default",{"src-string":t,msg:e.toString()}),e}}},window.defaultAtob=r,window.sdkAtob=e)}}]),e})(),$3e97667694aebf08$export$9d82dedbeb797f41=(e=>(e.fullscreenReplaceWebView="fullscreenReplaceWebView",e.fullscreenMoveWebView="fullscreenMoveWebView",e.fullscreenReplaceOverlay="fullscreenReplaceOverlay",e.fullscreenRestoreWebView="fullscreenRestoreWebView",e.handshakeResponse="handshakeResponse",e.actionToComponent="actionToComponent",e))({}),$057585bf838d51b0$export$9b0bca74892433ef=[$3e97667694aebf08$export$9d82dedbeb797f41.fullscreenReplaceWebView,$3e97667694aebf08$export$9d82dedbeb797f41.fullscreenMoveWebView,$3e97667694aebf08$export$9d82dedbeb797f41.fullscreenReplaceOverlay,$3e97667694aebf08$export$9d82dedbeb797f41.fullscreenRestoreWebView],$f5914d5fa710f736$export$544cf229e56c299f=[{merchantAppName:"boohooMAN",osName:"iOS"},{merchantAppName:"Nasty Gal",osName:"iOS"},{merchantAppName:"MISSPAP",osName:"iOS"},{merchantAppName:"boohoo",osName:"iOS"},{merchantAppName:"PLT UAT",osName:"iOS"}],$fa9011cb1dfb6667$export$caf75cbffb0ca40=(e=>(e.Root="Root",e.Frame="Frame",e))({}),$ec5a25b0ccdbabd5$export$d6ff711ee8724594=(e=>(e.RegisterWindow="RegisterWindow",e.PostReceiverMessage="PostReceiverMessage",e.PostNativeMessage="PostNativeMessage",e.IsNativeReadyRequest="IsNativeReadyRequest",e.IsNativeReadyResponse="IsNativeReadyResponse",e.IsSdkWebViewRequest="IsSdkWebViewRequest",e.IsSdkWebViewResponse="IsSdkWebViewResponse",e))({}),$c3ff21775b3c8166$export$ea3d1b96f570ebdd=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"handleMessage",value:function(t,r,a){try{var e;if(a.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.PostNativeMessage)return t.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root?(e=a.data,r.messageController.postEventMessageToNative(r,e),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("Relayed Native Message")):$dc2b35112bcce9e2$export$efa9a398d6368992.default.warn("Frame Message Bridge received invalid message",a),!0}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("NativeMessageDelegate handle message failed",t,r,a,e)}return!1}}]),e})(),$d4bd0b16daddf41f$export$813991340c5a5201=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"handleMessage",value:function(t,r,a){try{if(a.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.PostReceiverMessage){var e=a.data;try{r.messageController.processMessage(r,e),r.messageController.postMessageToComponents(r,e)}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("Relayed Receiver Message failed to post message via bridge",a,r,e)}return $dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("Relayed Receiver Message to Message Bridge",a,r),!0}}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("ReceiverMessageDelegate handle message failed",t,r,a,e)}return!1}}]),e})(),$24815a6cb6024ef5$export$a9cf52565e7ce5db=function e(t){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.isNativeReady=t},$d1ea647a48aee95f$export$23508ec371339b15=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"handleMessage",value:function(t,r,a){try{var e,o,n;if(a.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsNativeReadyRequest)return t.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root?(e=new $24815a6cb6024ef5$export$a9cf52565e7ce5db(r.nativeReady),o=new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsNativeReadyResponse,e,a.messageId),t.postMessage(o),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("Processed IsNativeReadyRequest",a,o)):$dc2b35112bcce9e2$export$efa9a398d6368992.default.warn("Frame Message Bridge received invalid message",a),!0;if(a.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsNativeReadyResponse)return t.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Frame?((n=a.data).isNativeReady&&r.setNativeReady(),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("Processed IsNativeReadyResponseData",a,n,this)):$dc2b35112bcce9e2$export$efa9a398d6368992.default.warn("Root Message Bridge received invalid message",a),!0}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("NativeReadyMessageDelegate handle message failed",t,r,a,e)}return!1}}]),e})(),$976c9715c78f6b69$export$15f24e2438b5a10d=function e(t){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.isSdkWebView=t},$7fb1a5c018ced9fc$export$85b2f1afd23a3b1c=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"handleMessage",value:function(t,r,a){try{var e,o,n;if(a.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsSdkWebViewRequest)return t.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root?(e=new $976c9715c78f6b69$export$15f24e2438b5a10d(r.nativeController.isSdkWebView(r)),o=new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsSdkWebViewResponse,e,a.messageId),t.postMessage(o),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("Processed IsSdkWebViewRequest",a,o)):$dc2b35112bcce9e2$export$efa9a398d6368992.default.warn("Frame Message Bridge received invalid message",a),!0;if(a.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsSdkWebViewResponse)return t.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Frame?(n=a.data,r.nativeController.setIsSdkWebView(n.isSdkWebView),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("Processed IsSdkWebViewResponse",a,n)):$dc2b35112bcce9e2$export$efa9a398d6368992.default.warn("Root Message Bridge received invalid message",a),!0}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("IsSdkWebViewMessageDelegate handle message failed",t,r,a,e)}return!1}}]),e})(),$12d919e3cb0be9dc$export$d011177d13fe20f1=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"handleMessage",value:function(e,t,r){try{var a;if(r.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.RegisterWindow)return e.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root?(a=r.sourceWindowId,e.windows.push(a),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindow registered",a)):$dc2b35112bcce9e2$export$efa9a398d6368992.default.warn("Frame Message Bridge received invalid message",r),!0}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindow failed to register",r,e)}return!1}}]),e})(),$e0ffd6e27a79933d$export$8a7b6697b2b3d2e1=(()=>{function n(){$cd80bf694d0631b1$export$71511d61b312f219(this,n)}return $62cc9eefa616c344$export$71511d61b312f219(n,null,[{key:"postMessageToNestedWindows",value:function(e,t){try{for(var r=t.frames,a=0;a<r.length;a++){var o=r[a];n.postMessageToWindow(e,o);try{this.postMessageToNestedWindows(e,o)}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindowMessage post failed to deep nested window",e)}}}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindowMessage post failed to nested window",e)}}},{key:"postMessageToWindow",value:function(t,e){try{$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowMessage Will Send",t,window.__KlarnaNativeHook);e.postMessage(t,"*"),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowMessage Sent",t,window.__KlarnaNativeHook,"*")}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindowMessage Failed to Send",e,t,window.__KlarnaNativeHook)}}}]),n})(),$4056916c3e7cc48b$export$8697e044b6ceac7e=(()=>{function r(e){var t=this;$cd80bf694d0631b1$export$71511d61b312f219(this,r),this.windows=[],this.delegates=[new $12d919e3cb0be9dc$export$d011177d13fe20f1,new $7fb1a5c018ced9fc$export$85b2f1afd23a3b1c,new $d1ea647a48aee95f$export$23508ec371339b15,new $c3ff21775b3c8166$export$ea3d1b96f570ebdd,new $d4bd0b16daddf41f$export$813991340c5a5201],this.responseCallbacks={},this.listener=function(e){try{t.receivedMessage(e)}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindowMessage listener caught exception",e)}},this.windowId=r.getWindowId(),this.messageBridge=e,window.self!==window.top?this.mode=$fa9011cb1dfb6667$export$caf75cbffb0ca40.Frame:this.mode=$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root}return $62cc9eefa616c344$export$71511d61b312f219(r,[{key:"postMessage",value:function(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowMessage Will Send",t,window.__KlarnaNativeHook),r&&(this.responseCallbacks[t.messageId]=r);var e=t.encode();switch(this.mode){case $fa9011cb1dfb6667$export$caf75cbffb0ca40.Root:$e0ffd6e27a79933d$export$8a7b6697b2b3d2e1.postMessageToNestedWindows(e,window.self);break;case $fa9011cb1dfb6667$export$caf75cbffb0ca40.Frame:$e0ffd6e27a79933d$export$8a7b6697b2b3d2e1.postMessageToWindow(e,window.top)}}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindowMessage post has failed",t,r,window.__KlarnaNativeHook,e)}}},{key:"register",value:function(e){var t;this.messageBridge!=e&&(t=this.messageBridge,this.messageBridge=e,$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowController message bridge replaced",e,t)),window.addEventListener("message",this.listener,{once:!1,capture:!1,passive:!1}),this.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Frame&&this.postMessage(new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.RegisterWindow,null)),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowController Registered")}},{key:"unregister",value:function(){this.messageBridge=null,window.removeEventListener("message",this.listener,{capture:!1}),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowController Un-Registered")}},{key:"receivedMessage",value:function(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("MessageEvent Received",e),e.source===window.self?$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("MessageEvent received from self"):(e=$3f8d71218c98a45f$export$137d9274eb4bdc8d.decode(e.data),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowMessage Received",e,window.__KlarnaNativeHook),this.receivedCrossWindowMessage(e),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowMessage Processed",e,window.__KlarnaNativeHook))}},{key:"receivedCrossWindowMessage",value:function(e){if(this.validateCrossWindowMessage(e)){var t=this.messageBridge;if(null==t)$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindowController null message bridge");else{var r=!0,a=!1,o=void 0;if(!this.callResponseCallback(e)){try{for(var n,d=this.delegates[Symbol.iterator]();!(r=(n=d.next()).done);r=!0)if(n.value.handleMessage(this,t,e))return}catch(e){a=!0,o=e}finally{try{r||null==d.return||d.return()}finally{if(a)throw o}}$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindowController message could not be handled",this,t,e)}}}else $dc2b35112bcce9e2$export$efa9a398d6368992.default.error("CrossWindowController received invalid message",e)}},{key:"validateCrossWindowMessage",value:function(e){return null!=e.messageId&&null!=e.messageId&&0<e.messageId.length&&null!=e.action&&null!=e.action&&0<e.action.length}},{key:"callResponseCallback",value:function(e){var t=this.responseCallbacks[e.messageId];return!!t&&t(e)}}],[{key:"getWindowId",value:function(){var e=window.__KlarnaNativeHookWindowId;return e||(e=$86c5e230eba4f632$export$d2ca453b913dcdea.createUUIDv4(),window.__KlarnaNativeHookWindowId=e)}}]),r})(),$3f8d71218c98a45f$export$137d9274eb4bdc8d=(()=>{function n(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:$86c5e230eba4f632$export$d2ca453b913dcdea.createUUIDv4(),a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:window.origin,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:$4056916c3e7cc48b$export$8697e044b6ceac7e.getWindowId();$cd80bf694d0631b1$export$71511d61b312f219(this,n),this.messageId=r,this.sourceWindowId=o,this.sourceOrigin=a,this.action=e,this.data=t}return $62cc9eefa616c344$export$71511d61b312f219(n,[{key:"encode",value:function(){return JSON.stringify(this)}}],[{key:"decode",value:function(e){return JSON.parse(e)}}]),n})(),$85771519b3f11699$export$15f59c3f623e5e81=(()=>{function r(){$cd80bf694d0631b1$export$71511d61b312f219(this,r),this.delayedMessages=[],this.sendDelayedMessagesWithInterval()}return $62cc9eefa616c344$export$71511d61b312f219(r,[{key:"sendMessage",value:function(e,t){e.nativeReady?r.shouldDelayMessage(e,t)?this.delayedMessages.push(new $85771519b3f11699$var$MessageBridgeNativeHookMessage(e,t)):this.postEventMessageToNative(e,r.createBridgeMessage(t)):e.queuedMessages.push(t)}},{key:"postEventMessageToNative",value:function(e,t){e.crossWindowController.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Frame?e.crossWindowController.postMessage(new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.PostNativeMessage,t)):null!=(e=e.nativeController.getNativeMessageHandler())&&(e.postMessage(JSON.stringify(t)),$dc2b35112bcce9e2$export$efa9a398d6368992.default.info("Native Notified for Message",t,e))}},{key:"sendDelayedMessagesWithInterval",value:function(){var t=this;window.setInterval(function(){var e=t.delayedMessages.shift();null!=e&&null!=e.message&&t.postEventMessageToNative(e.messageBridge,r.createBridgeMessage(e.message))},200)}}],[{key:"createBridgeMessage",value:function(e){return new $54e9de874e7cf259$export$468fbe6771f1699e($b4efb1694e6b9d0a$export$a96b0bbdbd70b734.MessagePosted,null,e,null)}},{key:"shouldDelayMessage",value:function(t,r){if(-1!==$057585bf838d51b0$export$9b0bca74892433ef.indexOf(r.action)){t=$86c5e230eba4f632$export$d2ca453b913dcdea.getHandshakeResponseParams(t,r.sender);if(t){var e=t.osName,a=t.merchantAppName,o=!0,r=!1,t=void 0;try{for(var n,d=$f5914d5fa710f736$export$544cf229e56c299f[Symbol.iterator]();!(o=(n=d.next()).done);o=!0){var s=n.value;if(e===s.osName&&a===s.merchantAppName)return!0}}catch(e){r=!0,t=e}finally{try{o||null==d.return||d.return()}finally{if(r)throw t}}}}return!1}}]),r})(),$85771519b3f11699$var$MessageBridgeNativeHookMessage=function e(t,r){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.messageBridge=t,this.message=r},$39d6456d60f7b2a5$export$c8a7d7e37b742a82=(e=>(e.KlarnaPayments="KlarnaPayments",e.KlarnaPaymentsWrapper="KlarnaPaymentsWrapper",e))({}),$0f3b9fcdcc260be5$export$a002182e51710d39=function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)},$9524e81dfe28183b$export$2cdde459a873087f=($0f3b9fcdcc260be5$export$a002182e51710d39.ReceiverName=(($0f3b9fcdcc260be5$var$_class=function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}).Native="Native",$0f3b9fcdcc260be5$var$_class),(()=>{function s(){$cd80bf694d0631b1$export$71511d61b312f219(this,s)}return $62cc9eefa616c344$export$71511d61b312f219(s,[{key:"releaseQueuedMessagesIfReady",value:function(e,t){if(t.sender===$0f3b9fcdcc260be5$export$a002182e51710d39.ReceiverName.Native&&t.receiver===$39d6456d60f7b2a5$export$c8a7d7e37b742a82.KlarnaPayments&&t.action===$3e97667694aebf08$export$9d82dedbeb797f41.handshakeResponse&&s.isKlarnaPaymentsReady(e)&&0<e.queuedKlarnaPaymentsMessages.length){$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("KlarnaPayments received handshake response, de-queuing messages.");var r=!0,t=!1,a=void 0;try{for(var o,n=e.queuedKlarnaPaymentsMessages[Symbol.iterator]();!(r=(o=n.next()).done);r=!0){var d=o.value;this.sendMessage(e,d),$dc2b35112bcce9e2$export$efa9a398d6368992.default.info("Message De-queued",d)}}catch(e){t=!0,a=e}finally{try{r||null==n.return||n.return()}finally{if(t)throw a}}return e.queuedKlarnaPaymentsMessages=[],!0}return!1}},{key:"sendMessage",value:function(e,t){s.queueMessageIfNeeded(e,t)||(this.postMessageToComponents(e,t),e.crossWindowController.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root&&e.crossWindowController.postMessage(new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.PostReceiverMessage,t)),this.releaseQueuedMessagesIfReady(e,t))}},{key:"postMessageToComponents",value:function(e,t){var r=!0,a=!1,o=void 0;try{for(var n,d=e.receivers[Symbol.iterator]();!(r=(n=d.next()).done);r=!0){var s=n.value;s.name!==t.receiver&&"*"!==t.receiver||(s.callback(t),$dc2b35112bcce9e2$export$efa9a398d6368992.default.info("Receiver Notified for Message",t,s))}}catch(e){a=!0,o=e}finally{try{r||null==d.return||d.return()}finally{if(a)throw o}}}}],[{key:"isKlarnaPaymentsReady",value:function(e){e=$86c5e230eba4f632$export$d2ca453b913dcdea.getHandshakeResponseParams(e,$39d6456d60f7b2a5$export$c8a7d7e37b742a82.KlarnaPayments);return null!=e}},{key:"queueMessageIfNeeded",value:function(e,t){return t.sender===$0f3b9fcdcc260be5$export$a002182e51710d39.ReceiverName.Native&&t.receiver===$39d6456d60f7b2a5$export$c8a7d7e37b742a82.KlarnaPaymentsWrapper&&t.action!==$3e97667694aebf08$export$9d82dedbeb797f41.handshakeResponse&&!s.isKlarnaPaymentsReady(e)&&(e.queuedKlarnaPaymentsMessages.push(t),$dc2b35112bcce9e2$export$efa9a398d6368992.default.info("Message Queued",t),!0)}}]),s})()),$4814da207725bbf9$export$b11de1d3f90d3095=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"processMessage",value:function(e,t){"handhakeResponse"===t.action&&(t.action="handshakeResponse")}}]),e})(),$703d4353b2e97418$export$8121b940eecf6dfc=[{osName:"iOS",nativeVersion:"2.0.26"},{osName:"iOS",nativeVersion:"2.0.27"},{osName:"iOS",nativeVersion:"2.0.28"},{osName:"android",nativeVersion:"2.0.26"},{osName:"android",nativeVersion:"2.0.27"},{osName:"android",nativeVersion:"2.0.28"},{osName:"android",nativeVersion:"2.0.29"}],$ef3b0819d68510c9$export$9e75f50bdaecb36d=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"processMessage",value:function(e,t){if("handshakeResponse"===t.action)try{var r=t.params.osName,a=t.params.nativeVersion,o=!0,n=!1,d=void 0;try{for(var s,c=$703d4353b2e97418$export$8121b940eecf6dfc[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var i=s.value;if(r===i.osName&&a===i.nativeVersion){var f=t.params.productOptions;if(void 0!==f&&"undefined"!==f&&null!=f){var $=JSON.parse(f);if(null!=$&&null!=$.klarnaInitData)try{var b=JSON.parse($.klarnaInitData);$.klarnaInitData=b,t.params.productOptions=JSON.stringify($)}catch(e){var l="Error parsing klarnaInitData parameter inside productOptions: ";try{l+=JSON.stringify(e)}catch(e){}finally{$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("rewrite-productOptions",{msg:l})}}}}}}catch(e){n=!0,d=e}finally{try{o||null==c.return||c.return()}finally{if(n)throw d}}}catch(e){n="Error parsing productOptions parameter: ";try{n+=JSON.stringify(e)}catch(e){}finally{$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("rewrite-productOptions",{msg:n})}}}}]),e})(),$3a048628b2890696$export$eed1627e80a5b594=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"processMessage",value:function(e,t){if("setExperiments"===t.action){try{var r;void 0!==t.params.experiments&&"undefined"!==t.params.experiments&&null!=t.params.experiments&&(r=t.params.experiments,$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("rewrite-experiments-info",{msg:"Experiments JSON received: "+r}),"string"!=typeof r)&&(t.params.experiments=JSON.stringify(r))}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("rewrite-experiments",{msg:"Error stringifying experiments parameter sent from KP: "+JSON.stringify(e)})}try{if(void 0!==t.params.experiments&&"undefined"!==t.params.experiments&&null!=t.params.experiments){var a=t.params.experiments;if("string"==typeof a){var o,n=JSON.parse(a),d=[];for(o in n){var s=n[o];null!=s.variate&&void 0!==s.variate||(s.variate=""),d.push(s)}t.params.experiments=JSON.stringify(d)}}}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("rewrite-experiments-variates",{msg:"Error adding missing variate parameter in experiments sent from KP: "+JSON.stringify(e)})}}}}]),e})(),$ecbd5ca65160a7bb$export$b385821f0f78b939=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"processMessage",value:function(e,t){"handshake"===t.action&&"KlarnaPaymentsWrapper"===t.sender&&window.__WrapperMessageController&&window.__WrapperMessageController._extractBase64&&(window.__WrapperMessageController._extractBase64=function(e,t,r){if(null==e.params[r]||"null"===e.params[r])return null;try{var a=e.params[r],o=atob(a);return JSON.parse(o)}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("extract-b64",{msg:"Error extracting b64 with custom atob() "+JSON.stringify(e)})}})}}]),e})(),$20b9286aec418fd6$export$d2210066b6438afd=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"processMessage",value:function(e,t){if("actionToComponent"===t.action)try{var r;"undefined"!==t.params.sessionData&&null!=t.params.sessionData&&("null"===t.params.sessionData?delete t.params.sessionData:(r=t.params.sessionData,t.params.sessionData=$e46f7c82eed16cd3$export$5e8778959ee066ba+r.replace(/\n/g,"").replace(/-/g,"+").replace(/_/g,"/")))}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("re-format-session-data",{msg:"Error reformatting session data: "+JSON.stringify(e)})}}}]),e})(),$7fa6dffb869bcbcd$export$c7c9b199d5b7287c=(()=>{function r(){$cd80bf694d0631b1$export$71511d61b312f219(this,r)}return $62cc9eefa616c344$export$71511d61b312f219(r,[{key:"processMessage",value:function(e,t){"fullscreenShow"===t.action&&"android"===(null==(e=r.getHandshakeResponseParams(e,t))?void 0:e.osName)&&(t.params.canScroll="true")}}],[{key:"getHandshakeResponseParams",value:function(e,t){t=t.receiver===$0f3b9fcdcc260be5$export$a002182e51710d39.ReceiverName.Native?t.sender:t.receiver;return $86c5e230eba4f632$export$d2ca453b913dcdea.getHandshakeResponseParams(e,t)}}]),r})(),$c8630f9c56e73faf$export$c19720cc6ee85749=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"processMessage",value:function(t,e){if(e.action===$3e97667694aebf08$export$9d82dedbeb797f41.handshakeResponse)try{t.handshakeResponseParamsMap[e.receiver]=e.params,$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("Cached handshake",e.receiver,e.params)}catch(e){t="Error caching handshake response params: ";try{t+=JSON.stringify(e)}catch(e){}finally{$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("cache-handshakeResponseParams",{msg:t})}}}}]),e})(),$e2f3c9749fb45b3b$export$b71885c9ed9a7f3e={handshake:{responseAction:"handshakeResponse",timeoutInterval:1e3}},$bee0aad476183259$export$79dd02ead672e882=(()=>{function a(e,t,r){$cd80bf694d0631b1$export$71511d61b312f219(this,a),this.name=e,this.level=t,this.payload=r}return $62cc9eefa616c344$export$71511d61b312f219(a,[{key:"withPayload",value:function(e){return new a(this.name,this.level,e).build()}},{key:"build",value:function(){return{name:this.name,level:this.level,payload:this.payload}}}]),a})(),$d1833f90152cec72$export$276c87da55ac41e1=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=2]="INFO",e[e.ERROR=4]="ERROR",e))({}),$913e5e170f2ef076$export$9575b9f845a31cb=function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)},$624bb67c5638d266$export$86c9c54cd78967a3=($913e5e170f2ef076$export$9575b9f845a31cb.MessageResponseInTime=new $bee0aad476183259$export$79dd02ead672e882("message_response_in_time",$d1833f90152cec72$export$276c87da55ac41e1.INFO),$913e5e170f2ef076$export$9575b9f845a31cb.MessageResponseTimeout=new $bee0aad476183259$export$79dd02ead672e882("message_response_timeout",$d1833f90152cec72$export$276c87da55ac41e1.ERROR),$913e5e170f2ef076$export$9575b9f845a31cb.MessageResponseValid=new $bee0aad476183259$export$79dd02ead672e882("message_response_valid",$d1833f90152cec72$export$276c87da55ac41e1.INFO),$913e5e170f2ef076$export$9575b9f845a31cb.MessageResponseInvalid=new $bee0aad476183259$export$79dd02ead672e882("message_response_invalid",$d1833f90152cec72$export$276c87da55ac41e1.ERROR),function e(t){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.action=t.action,this.sender=t.sender,this.receiver=t.receiver,this.messageId=t.messageId}),$7dd74269339ff428$export$1f3054e84aa43db=(()=>{function t(e){$cd80bf694d0631b1$export$71511d61b312f219(this,t),this.observedMessages={},this.observedMessagesTimeouts={},this.dependencyContainer=e}return $62cc9eefa616c344$export$71511d61b312f219(t,[{key:"processMessage",value:function(e,t){var r=this.messageResponseTimeout(t);void 0!==r?this.startTimeoutForMessage(t,r):void 0!==(r=this.responseToObservedMessage(t))?this.processObservedMessage(r,t):this.dependencyContainer.logger.debug("Message is not being observed")}},{key:"startTimeoutForMessage",value:function(t,e){var r=this,a=t.messageId,e=(this.observedMessages[a]=t,setTimeout(function(){var e=r.observedMessages[t.messageId];void 0!==e&&(e={message:new $624bb67c5638d266$export$86c9c54cd78967a3(e)},r.dependencyContainer.analyticsController.logEvent($913e5e170f2ef076$export$9575b9f845a31cb.MessageResponseTimeout.withPayload(e)))},e));this.observedMessagesTimeouts[a]=e}},{key:"processObservedMessage",value:function(e,t){var r=e.messageId,e={message:new $624bb67c5638d266$export$86c9c54cd78967a3(e),responseMessage:new $624bb67c5638d266$export$86c9c54cd78967a3(t)};delete this.observedMessages[r],this.clearTimeoutForMessage(r),this.dependencyContainer.analyticsController.logEvent($913e5e170f2ef076$export$9575b9f845a31cb.MessageResponseInTime.withPayload(e))}},{key:"clearTimeoutForMessage",value:function(e){var t=this.observedMessagesTimeouts[e];void 0!==t&&(clearTimeout(t),delete this.observedMessagesTimeouts[e])}},{key:"messageResponseTimeout",value:function(e){e=$e2f3c9749fb45b3b$export$b71885c9ed9a7f3e[e.action];return null==e?void 0:e.timeoutInterval}},{key:"responseToObservedMessage",value:function(e){return this.observedMessages[e.messageId]}}]),t})(),$410c5ad4959c6c66$export$8ff363454ccde046=(()=>{function t(e){$cd80bf694d0631b1$export$71511d61b312f219(this,t),this.observedMessages={},this.dependencyContainer=e}return $62cc9eefa616c344$export$71511d61b312f219(t,[{key:"processMessage",value:function(e,t){var r,a;void 0!==$e2f3c9749fb45b3b$export$b71885c9ed9a7f3e[t.action]?this.observedMessages[t.messageId]=t:void 0!==(r=this.observedMessages[t.messageId])&&(a=null==(a=$e2f3c9749fb45b3b$export$b71885c9ed9a7f3e[r.action])?void 0:a.responseAction,t.action!==a?this.dependencyContainer.analyticsController.logEvent($913e5e170f2ef076$export$9575b9f845a31cb.MessageResponseInvalid.withPayload({message:new $624bb67c5638d266$export$86c9c54cd78967a3(r),responseMessage:new $624bb67c5638d266$export$86c9c54cd78967a3(t)})):this.dependencyContainer.analyticsController.logEvent($913e5e170f2ef076$export$9575b9f845a31cb.MessageResponseValid.withPayload({message:new $624bb67c5638d266$export$86c9c54cd78967a3(r),responseMessage:new $624bb67c5638d266$export$86c9c54cd78967a3(t)})),delete this.observedMessages[t.messageId])}}]),t})(),$af2a197b0dc9b6ac$export$2cabd05dec5a966a=(()=>{function t(e){$cd80bf694d0631b1$export$71511d61b312f219(this,t),this.nativeMessageSender=new $85771519b3f11699$export$15f59c3f623e5e81,this.componentMessageSender=new $9524e81dfe28183b$export$2cdde459a873087f,this.messageProcessors=[],this.dependencyContainer=e,this.messageProcessors.push(new $4814da207725bbf9$export$b11de1d3f90d3095,new $ef3b0819d68510c9$export$9e75f50bdaecb36d,new $3a048628b2890696$export$eed1627e80a5b594,new $ecbd5ca65160a7bb$export$b385821f0f78b939,new $20b9286aec418fd6$export$d2210066b6438afd,new $7fa6dffb869bcbcd$export$c7c9b199d5b7287c,new $c8630f9c56e73faf$export$c19720cc6ee85749,new $7dd74269339ff428$export$1f3054e84aa43db(this.dependencyContainer),new $410c5ad4959c6c66$export$8ff363454ccde046(this.dependencyContainer))}return $62cc9eefa616c344$export$71511d61b312f219(t,[{key:"postMessage",value:function(e,t,r){this.processMessage(e,t),(!r||t.receiver===$0f3b9fcdcc260be5$export$a002182e51710d39.ReceiverName.Native?this.nativeMessageSender:this.componentMessageSender).sendMessage(e,t)}},{key:"processMessage",value:function(t,r){this.messageProcessors.forEach(function(e){e.processMessage(t,r)})}},{key:"postEventMessageToNative",value:function(e,t){this.nativeMessageSender.postEventMessageToNative(e,t)}},{key:"postMessageToComponents",value:function(e,t){this.componentMessageSender.postMessageToComponents(e,t)}}]),t})(),$4fd8e36a662dd81b$export$d1b1e53e547a4664=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this._isSdkWebView=!1}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"isNativeReady",value:function(e){return e.nativeReady}},{key:"isNativeReadyAsync",value:function(o){return o.crossWindowController.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root?new Promise(function(e){return e(o.isNativeReady())}):new Promise(function(t,e){var r=window.setTimeout(function(){e("CrossWindowMessage Response Timeout")},3e3),a=new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsNativeReadyRequest,null);o.crossWindowController.postMessage(a,function(e){return e.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsNativeReadyResponse&&(e=e.data,window.clearTimeout(r),t(e.isNativeReady)),!1})})}},{key:"isSdkWebView",value:function(e){var t,r;return(t=null!=this.getNativeMessageHandler())!=this._isSdkWebView&&(e.crossWindowController.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root?(r=new $976c9715c78f6b69$export$15f24e2438b5a10d(t),r=new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsSdkWebViewResponse,r),e.crossWindowController.postMessage(r),this._isSdkWebView=t):t&&(this._isSdkWebView=t)),this._isSdkWebView}},{key:"isSdkWebViewAsync",value:function(o){var n=this;return o.crossWindowController.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root?new Promise(function(e){return e(n.isSdkWebView(o))}):new Promise(function(t,e){var r=window.setTimeout(function(){e("CrossWindowMessage Response Timeout")},3e3),a=new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsSdkWebViewRequest,null);o.crossWindowController.postMessage(a,function(e){return e.action===$ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsSdkWebViewResponse&&(e=e.data,n._isSdkWebView=e.isSdkWebView,window.clearTimeout(r),t(e.isSdkWebView)),!1})})}},{key:"setNativeReady",value:function(e){if(e.nativeReady)e.messageController.postEventMessageToNative(e,new $54e9de874e7cf259$export$468fbe6771f1699e($b4efb1694e6b9d0a$export$a96b0bbdbd70b734.MessageBridgeAlreadyRunning,null,null,null)),e.notifyEvent({name:"NativeHookAlreadyReady",payload:{receivers:e.receivers.toString(),queuedMessages:e.queuedMessages.toString()}});else{e.nativeReady=!0,e.messageController.postEventMessageToNative(e,new $54e9de874e7cf259$export$468fbe6771f1699e($b4efb1694e6b9d0a$export$a96b0bbdbd70b734.MessageBridgeWillStart,null,null,null));var t=!0,r=!1,a=void 0;try{for(var o,n=e.receivers.filter(function(e){return!e.registeredNatively})[Symbol.iterator]();!(t=(o=n.next()).done);t=!0){var d=o.value;e.messageController.postEventMessageToNative(e,new $54e9de874e7cf259$export$468fbe6771f1699e($b4efb1694e6b9d0a$export$a96b0bbdbd70b734.ReceiverAdded,d.name,null,null)),d.registeredNatively=!0}}catch(e){r=!0,a=e}finally{try{t||null==n.return||n.return()}finally{if(r)throw a}}var s=!0,r=!1,a=void 0;try{for(var c,i=e.queuedMessages[Symbol.iterator]();!(s=(c=i.next()).done);s=!0){var f=c.value;e.messageController.postEventMessageToNative(e,new $54e9de874e7cf259$export$468fbe6771f1699e($b4efb1694e6b9d0a$export$a96b0bbdbd70b734.MessagePosted,null,f,null))}}catch(e){r=!0,a=e}finally{try{s||null==i.return||i.return()}finally{if(r)throw a}}e.queuedMessages=[],e.crossWindowController.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Root&&(r=new $24815a6cb6024ef5$export$a9cf52565e7ce5db(e.nativeReady),a=new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsNativeReadyResponse,r),e.crossWindowController.postMessage(a)),e.notifyEvent({name:"NativeHookReady",payload:{receivers:e.receivers.toString(),queuedMessages:e.queuedMessages.toString()}})}}},{key:"setIsSdkWebView",value:function(e){this._isSdkWebView=e}},{key:"getNativeMessageHandler",value:function(){return e.getNativeMessageHandler()}}]),e})(),$0cdf7169dbc5007b$export$59e2a0f060df91e7=($4fd8e36a662dd81b$export$d1b1e53e547a4664.getNativeMessageHandler=function(){var e;return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.KlarnaNativeHookMessageHandler?e=window.webkit.messageHandlers.KlarnaNativeHookMessageHandler:window.KlarnaNativeHookMessageHandler&&(e=window.KlarnaNativeHookMessageHandler),e},function e(t,r){$cd80bf694d0631b1$export$71511d61b312f219(this,e),this.registeredNatively=!1,this.id=$86c5e230eba4f632$export$d2ca453b913dcdea.createUUIDv4(),this.name=t,this.callback=r}),$9e8cdbfcf67b38ba$export$fb16809fa2eec8fa=(()=>{function e(){$cd80bf694d0631b1$export$71511d61b312f219(this,e)}return $62cc9eefa616c344$export$71511d61b312f219(e,[{key:"addReceiver",value:function(e,t,r){t=new $0cdf7169dbc5007b$export$59e2a0f060df91e7(t,r);e.nativeReady&&(e.messageController.postEventMessageToNative(e,new $54e9de874e7cf259$export$468fbe6771f1699e($b4efb1694e6b9d0a$export$a96b0bbdbd70b734.ReceiverAdded,t.name,null,null)),t.registeredNatively=!0),e.receivers.push(t)}},{key:"removeReceiver",value:function(e,t,r){e.receivers=e.receivers.filter(function(e){return e.name!==t&&e.callback!==r}),e.nativeReady&&e.messageController.postEventMessageToNative(e,new $54e9de874e7cf259$export$468fbe6771f1699e($b4efb1694e6b9d0a$export$a96b0bbdbd70b734.ReceiverRemoved,t,null,null))}}]),e})();function $d4d656c304fff6fc$var$asyncGeneratorStep(e,t,r,a,o,n,d){try{var s=e[n](d),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function $d4d656c304fff6fc$export$71511d61b312f219(s){return function(){var e=this,d=arguments;return new Promise(function(t,r){var a=s.apply(e,d);function o(e){$d4d656c304fff6fc$var$asyncGeneratorStep(a,t,r,o,n,"next",e)}function n(e){$d4d656c304fff6fc$var$asyncGeneratorStep(a,t,r,o,n,"throw",e)}o(void 0)})}}function $96ee01e75e552cac$export$71511d61b312f219(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var $e04810f8dbeb1928$var$extendStatics=function(e,t){return($e04810f8dbeb1928$var$extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};function $e04810f8dbeb1928$export$a8ba968b8961cb8a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}$e04810f8dbeb1928$var$extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var $e04810f8dbeb1928$export$18ce0697a983be9b=function(){return($e04810f8dbeb1928$export$18ce0697a983be9b=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function $e04810f8dbeb1928$export$3c9a16f847548506(e,t){var r={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(r[o[a]]=e[o[a]]);return r}function $e04810f8dbeb1928$export$29e00dfd3077644b(e,t,r,a){var o,n=arguments.length,d=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"===("undefined"==typeof Reflect?"undefined":$96ee01e75e552cac$export$71511d61b312f219(Reflect))&&"function"==typeof Reflect.decorate)d=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;0<=s;s--)(o=e[s])&&(d=(n<3?o(d):3<n?o(t,r,d):o(t,r))||d);return 3<n&&d&&Object.defineProperty(t,r,d),d}function $e04810f8dbeb1928$export$d5ad3fd78186038f(r,a){return function(e,t){a(e,t,r)}}function $e04810f8dbeb1928$export$3a84e1ae4e97e9b0(e,t,r,a,o,n){function d(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var s,c=a.kind,i="getter"===c?"get":"setter"===c?"set":"value",e=!t&&e?a.static?e:e.prototype:null,f=t||(e?Object.getOwnPropertyDescriptor(e,a.name):{}),$=!1,b=r.length-1;0<=b;b--){var l,p={};for(l in a)p[l]="access"===l?{}:a[l];for(l in a.access)p.access[l]=a.access[l];p.addInitializer=function(e){if($)throw new TypeError("Cannot add initializers after decoration has completed");n.push(d(e||null))};var u=(0,r[b])("accessor"===c?{get:f.get,set:f.set}:f[i],p);if("accessor"===c){if(void 0!==u){if(null===u||"object"!==(void 0===u?"undefined":$96ee01e75e552cac$export$71511d61b312f219(u)))throw new TypeError("Object expected");(s=d(u.get))&&(f.get=s),(s=d(u.set))&&(f.set=s),(s=d(u.init))&&o.unshift(s)}}else(s=d(u))&&("field"===c?o.unshift(s):f[i]=s)}e&&Object.defineProperty(e,a.name,f),$=!0}function $e04810f8dbeb1928$export$d831c04e792af3d(e,t,r){for(var a=2<arguments.length,o=0;o<t.length;o++)r=a?t[o].call(e,r):t[o].call(e);return a?r:void 0}function $e04810f8dbeb1928$export$6a2a36740a146cb8(e){return"symbol"===(void 0===e?"undefined":$96ee01e75e552cac$export$71511d61b312f219(e))?e:"".concat(e)}function $e04810f8dbeb1928$export$d1a06452d3489bc7(e,t,r){return"symbol"===(void 0===t?"undefined":$96ee01e75e552cac$export$71511d61b312f219(t))&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function $e04810f8dbeb1928$export$f1db080c865becb9(e,t){if("object"===("undefined"==typeof Reflect?"undefined":$96ee01e75e552cac$export$71511d61b312f219(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function $e04810f8dbeb1928$export$1050f835b63b671e(e,d,s,c){return new(s=s||Promise)(function(r,t){function a(e){try{n(c.next(e))}catch(e){t(e)}}function o(e){try{n(c.throw(e))}catch(e){t(e)}}function n(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(a,o)}n((c=c.apply(e,d||[])).next())})}function $e04810f8dbeb1928$export$67ebef60e6f28a6(a,o){var n,d,s,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=e(0),i.throw=e(1),i.return=e(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function e(r){return function(e){var t=[r,e];if(n)throw new TypeError("Generator is already executing.");for(;c=i&&t[i=0]?0:c;)try{if(n=1,d&&(s=2&t[0]?d.return:t[0]?d.throw||((s=d.return)&&s.call(d),0):d.next)&&!(s=s.call(d,t[1])).done)return s;switch(d=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,d=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))c.label=t[1];else if(6===t[0]&&c.label<s[1])c.label=s[1],s=t;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(t)}}t=o.call(a,c)}catch(e){t=[6,e],d=0}finally{n=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}var $e04810f8dbeb1928$export$45d3717a4c69092e=Object.create?function(e,t,r,a){void 0===a&&(a=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,o)}:function(e,t,r,a){e[a=void 0===a?r:a]=t[r]};function $e04810f8dbeb1928$export$f33643c0debef087(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||$e04810f8dbeb1928$export$45d3717a4c69092e(t,e,r)}function $e04810f8dbeb1928$export$19a8beecd37a4c45(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&a>=e.length?void 0:e)&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $e04810f8dbeb1928$export$8d051b38c9118094(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,o,n=r.call(e),d=[];try{for(;(void 0===t||0<t--)&&!(a=n.next()).done;)d.push(a.value)}catch(e){o={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return d}function $e04810f8dbeb1928$export$afc72e2116322959(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat($e04810f8dbeb1928$export$8d051b38c9118094(arguments[t]));return e}function $e04810f8dbeb1928$export$6388937ca91ccae8(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var a=Array(e),o=0,t=0;t<r;t++)for(var n=arguments[t],d=0,s=n.length;d<s;d++,o++)a[o]=n[d];return a}function $e04810f8dbeb1928$export$1216008129fb82ed(e,t,r){if(r||2===arguments.length)for(var a,o=0,n=t.length;o<n;o++)!a&&o in t||((a=a||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(a||Array.prototype.slice.call(t))}function $e04810f8dbeb1928$export$10c90e4f7922046c(e){return this instanceof $e04810f8dbeb1928$export$10c90e4f7922046c?(this.v=e,this):new $e04810f8dbeb1928$export$10c90e4f7922046c(e)}function $e04810f8dbeb1928$export$e427f37a30a4de9b(e,t,r){var o,n,d;if(Symbol.asyncIterator)return o=r.apply(e,t||[]),n=[],d=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(t){return function(e){return Promise.resolve(e).then(t,i)}}),d[Symbol.asyncIterator]=function(){return this},d;throw new TypeError("Symbol.asyncIterator is not defined.");function a(a,e){o[a]&&(d[a]=function(r){return new Promise(function(e,t){1<n.push([a,r,e,t])||s(a,r)})},e)&&(d[a]=e(d[a]))}function s(e,t){try{(r=o[e](t)).value instanceof $e04810f8dbeb1928$export$10c90e4f7922046c?Promise.resolve(r.value.v).then(c,i):f(n[0][2],r)}catch(e){f(n[0][3],e)}var r}function c(e){s("next",e)}function i(e){s("throw",e)}function f(e,t){e(t),n.shift(),n.length&&s(n[0][0],n[0][1])}}function $e04810f8dbeb1928$export$bbd80228419bb833(a){var o,e={};return t("next"),t("throw",function(e){throw e}),t("return"),e[Symbol.iterator]=function(){return this},e;function t(t,r){e[t]=a[t]?function(e){return(o=!o)?{value:$e04810f8dbeb1928$export$10c90e4f7922046c(a[t](e)),done:!1}:r?r(e):e}:r}}function $e04810f8dbeb1928$export$e3b29a3d6162315f(d){var e,t;if(Symbol.asyncIterator)return(e=d[Symbol.asyncIterator])?e.call(d):(d="function"==typeof $e04810f8dbeb1928$export$19a8beecd37a4c45?$e04810f8dbeb1928$export$19a8beecd37a4c45(d):d[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);throw new TypeError("Symbol.asyncIterator is not defined.");function r(n){t[n]=d[n]&&function(o){return new Promise(function(e,t){var r,a;o=d[n](o),r=e,e=t,a=o.done,t=o.value,Promise.resolve(t).then(function(e){r({value:e,done:a})},e)})}}}function $e04810f8dbeb1928$export$4fb47efe1390b86f(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var $e04810f8dbeb1928$var$__setModuleDefault=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},$e04810f8dbeb1928$var$ownKeys=function(e){return($e04810f8dbeb1928$var$ownKeys=Object.getOwnPropertyNames||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[r.length]=t);return r})(e)};function $e04810f8dbeb1928$export$c21735bcef00d192(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=$e04810f8dbeb1928$var$ownKeys(e),a=0;a<r.length;a++)"default"!==r[a]&&$e04810f8dbeb1928$export$45d3717a4c69092e(t,e,r[a]);return $e04810f8dbeb1928$var$__setModuleDefault(t,e),t}function $e04810f8dbeb1928$export$da59b14a69baef04(e){return e&&e.__esModule?e:{default:e}}function $e04810f8dbeb1928$export$d5dcaf168c640c35(e,t,r,a){if("a"===r&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e===t&&a:t.has(e))return"m"===r?a:"a"===r?a.call(e):a?a.value:t.get(e);throw new TypeError("Cannot read private member from an object whose class did not declare it")}function $e04810f8dbeb1928$export$d40a35129aaff81f(e,t,r,a,o){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e===t&&o:t.has(e))return"a"===a?o.call(e,r):o?o.value=r:t.set(e,r),r;throw new TypeError("Cannot write private member to an object whose class did not declare it")}function $e04810f8dbeb1928$export$81fdc39f203e4e04(e,t){if(null===t||"object"!==(void 0===t?"undefined":$96ee01e75e552cac$export$71511d61b312f219(t))&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function $e04810f8dbeb1928$export$88ac25d8e944e405(e,t,r){if(null!=t){if("object"!==(void 0===t?"undefined":$96ee01e75e552cac$export$71511d61b312f219(t))&&"function"!=typeof t)throw new TypeError("Object expected.");var a,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");a=t[Symbol.asyncDispose]}if(void 0===a){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");a=t[Symbol.dispose],r&&(o=a)}if("function"!=typeof a)throw new TypeError("Object not disposable.");o&&(a=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:a,async:r})}else r&&e.stack.push({async:!0});return t}var $e04810f8dbeb1928$var$_SuppressedError="function"==typeof SuppressedError?SuppressedError:function(e,t,r){r=new Error(r);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function $e04810f8dbeb1928$export$8f076105dc360e92(r){function a(e){r.error=r.hasError?new $e04810f8dbeb1928$var$_SuppressedError(e,r.error,"An error was suppressed during disposal."):e,r.hasError=!0}var o,n=0;return function t(){for(;o=r.stack.pop();)try{if(!o.async&&1===n)return n=0,r.stack.push(o),Promise.resolve().then(t);if(o.dispose){var e=o.dispose.call(o.value);if(o.async)return n|=2,Promise.resolve(e).then(t,function(e){return a(e),t()})}else n|=1}catch(e){a(e)}if(1===n)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}()}function $e04810f8dbeb1928$export$889dfb5d17574b0b(e,n){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,t,r,a,o){return t?n?".jsx":".js":!r||a&&o?r+a+"."+o.toLowerCase()+"js":e}):e}var $e04810f8dbeb1928$export$2e2bcd8739ae039={__extends:$e04810f8dbeb1928$export$a8ba968b8961cb8a,__assign:$e04810f8dbeb1928$export$18ce0697a983be9b,__rest:$e04810f8dbeb1928$export$3c9a16f847548506,__decorate:$e04810f8dbeb1928$export$29e00dfd3077644b,__param:$e04810f8dbeb1928$export$d5ad3fd78186038f,__esDecorate:$e04810f8dbeb1928$export$3a84e1ae4e97e9b0,__runInitializers:$e04810f8dbeb1928$export$d831c04e792af3d,__propKey:$e04810f8dbeb1928$export$6a2a36740a146cb8,__setFunctionName:$e04810f8dbeb1928$export$d1a06452d3489bc7,__metadata:$e04810f8dbeb1928$export$f1db080c865becb9,__awaiter:$e04810f8dbeb1928$export$1050f835b63b671e,__generator:$e04810f8dbeb1928$export$67ebef60e6f28a6,__createBinding:$e04810f8dbeb1928$export$45d3717a4c69092e,__exportStar:$e04810f8dbeb1928$export$f33643c0debef087,__values:$e04810f8dbeb1928$export$19a8beecd37a4c45,__read:$e04810f8dbeb1928$export$8d051b38c9118094,__spread:$e04810f8dbeb1928$export$afc72e2116322959,__spreadArrays:$e04810f8dbeb1928$export$6388937ca91ccae8,__spreadArray:$e04810f8dbeb1928$export$1216008129fb82ed,__await:$e04810f8dbeb1928$export$10c90e4f7922046c,__asyncGenerator:$e04810f8dbeb1928$export$e427f37a30a4de9b,__asyncDelegator:$e04810f8dbeb1928$export$bbd80228419bb833,__asyncValues:$e04810f8dbeb1928$export$e3b29a3d6162315f,__makeTemplateObject:$e04810f8dbeb1928$export$4fb47efe1390b86f,__importStar:$e04810f8dbeb1928$export$c21735bcef00d192,__importDefault:$e04810f8dbeb1928$export$da59b14a69baef04,__classPrivateFieldGet:$e04810f8dbeb1928$export$d5dcaf168c640c35,__classPrivateFieldSet:$e04810f8dbeb1928$export$d40a35129aaff81f,__classPrivateFieldIn:$e04810f8dbeb1928$export$81fdc39f203e4e04,__addDisposableResource:$e04810f8dbeb1928$export$88ac25d8e944e405,__disposeResources:$e04810f8dbeb1928$export$8f076105dc360e92,__rewriteRelativeImportExtension:$e04810f8dbeb1928$export$889dfb5d17574b0b};function $dc0cb7d118b5c913$export$71511d61b312f219(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $cc99dcb756399fbf$export$2e2bcd8739ae039={create:function(e,t){(new e.Image).src=t}},$ad4a494ee18bd328$export$2e2bcd8739ae039={create:function(e,t,r){e.navigator.sendBeacon(t,JSON.stringify(r))}},$026025f77c2d7e42$exports={},$026025f77c2d7e42$export$61b49a5ae59d663=($parcel$export($026025f77c2d7e42$exports,"ALL",function(){return $026025f77c2d7e42$export$61b49a5ae59d663}),$parcel$export($026025f77c2d7e42$exports,"TRACE",function(){return $026025f77c2d7e42$export$8754b71dc67cd5d0}),$parcel$export($026025f77c2d7e42$exports,"DEBUG",function(){return $026025f77c2d7e42$export$3f32c2013f0dcc1e}),$parcel$export($026025f77c2d7e42$exports,"INFO",function(){return $026025f77c2d7e42$export$7ecad81ba40c4d73}),$parcel$export($026025f77c2d7e42$exports,"WARN",function(){return $026025f77c2d7e42$export$1bb2bb898824f628}),$parcel$export($026025f77c2d7e42$exports,"ERROR",function(){return $026025f77c2d7e42$export$103bedf43ba882db}),$parcel$export($026025f77c2d7e42$exports,"FATAL",function(){return $026025f77c2d7e42$export$92a7009ed4a42216}),$parcel$export($026025f77c2d7e42$exports,"OFF",function(){return $026025f77c2d7e42$export$173de64b5ad0d5b4}),0),$026025f77c2d7e42$export$8754b71dc67cd5d0=0,$026025f77c2d7e42$export$3f32c2013f0dcc1e=1,$026025f77c2d7e42$export$7ecad81ba40c4d73=2,$026025f77c2d7e42$export$1bb2bb898824f628=3,$026025f77c2d7e42$export$103bedf43ba882db=4,$026025f77c2d7e42$export$92a7009ed4a42216=5,$026025f77c2d7e42$export$173de64b5ad0d5b4=6,$2c150599ea49b34a$var$_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,a=arguments[t];for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},$2c150599ea49b34a$var$_typeof="function"==typeof Symbol&&"symbol"===$96ee01e75e552cac$export$71511d61b312f219(Symbol.iterator)?function(e){return void 0===e?"undefined":$96ee01e75e552cac$export$71511d61b312f219(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":$96ee01e75e552cac$export$71511d61b312f219(e)},$2c150599ea49b34a$var$API_PATH="/v1/";function $2c150599ea49b34a$export$2e2bcd8739ae039(e){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window;if("object"!==(void 0===e?"undefined":$2c150599ea49b34a$var$_typeof(e))||!e)throw new TypeError("expected configuration object");var t=e.baseUrl,n=void 0===t?"https://eu.klarnaevt.com":t,d=e.client,s=e.clientVersion,c=e.sessionId,t=e.commonData,i=void 0===t?{}:t,t=e.instanceId,f=void 0===t?Math.floor(9e3*Math.random())+1e3:t,$=e.logLevel||$026025f77c2d7e42$export$61b49a5ae59d663;if("string"!=typeof d)throw new TypeError("expected `client` in the configuration object");if("string"!=typeof s)throw new TypeError("expected `clientVersion` in the configuration object");if("string"!=typeof c)throw new TypeError("expected `sessionId` in the configuration object");if("number"!=typeof $||$<$026025f77c2d7e42$export$61b49a5ae59d663||$026025f77c2d7e42$export$173de64b5ad0d5b4<$)throw new TypeError("invalid `logLevel` ("+$+")");function b(t){return Object.keys(t).sort().map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:$026025f77c2d7e42$export$61b49a5ae59d663;if(!(a<$)){if(!e)throw new TypeError("expected `name` as first parameter");t=$2c150599ea49b34a$var$_extends({},i,t,{iid:f,sid:c,timestamp:t.timestamp||(new Date).getTime()}),a=""+n+$2c150599ea49b34a$var$API_PATH+d+"/"+s+"/"+e+"?"+b(t);try{$ad4a494ee18bd328$export$2e2bcd8739ae039.create(o,a,r)}catch(e){r&&(a+="&"+b(r)),$cc99dcb756399fbf$export$2e2bcd8739ae039.create(o,a)}}}return{event:a,trace:function(e,t,r){a(e,t,r,$026025f77c2d7e42$export$8754b71dc67cd5d0)},debug:function(e,t,r){a(e,t,r,$026025f77c2d7e42$export$3f32c2013f0dcc1e)},info:function(e,t,r){a(e,t,r,$026025f77c2d7e42$export$7ecad81ba40c4d73)},warn:function(e,t,r){a(e,t,r,$026025f77c2d7e42$export$1bb2bb898824f628)},error:function(e,t,r){a(e,t,r,$026025f77c2d7e42$export$103bedf43ba882db)},fatal:function(e,t,r){a(e,t,r,$026025f77c2d7e42$export$92a7009ed4a42216)},setLogLevel:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:$026025f77c2d7e42$export$61b49a5ae59d663;if("number"!=typeof e||e<$026025f77c2d7e42$export$61b49a5ae59d663||$026025f77c2d7e42$export$173de64b5ad0d5b4<e)throw new TypeError("invalid `logLevel` ("+e+")");$=e},getConfig:function(){return{baseUrl:n,client:d,clientVersion:s,sessionId:c,instanceId:f,logLevel:$}}}}var $06309653d01c5828$var$_obj,$06309653d01c5828$export$87e5888863658dcc=(e=>(e[e.ALL=0]="ALL",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.FATAL=5]="FATAL",e[e.OFF=6]="OFF",e))({}),$06309653d01c5828$export$26ac5bc6e09a3af6=($dc0cb7d118b5c913$export$71511d61b312f219($06309653d01c5828$var$_obj={},0,$026025f77c2d7e42$exports.ALL),$dc0cb7d118b5c913$export$71511d61b312f219($06309653d01c5828$var$_obj,1,$026025f77c2d7e42$exports.DEBUG),$dc0cb7d118b5c913$export$71511d61b312f219($06309653d01c5828$var$_obj,2,$026025f77c2d7e42$exports.INFO),$dc0cb7d118b5c913$export$71511d61b312f219($06309653d01c5828$var$_obj,3,$026025f77c2d7e42$exports.WARN),$dc0cb7d118b5c913$export$71511d61b312f219($06309653d01c5828$var$_obj,4,$026025f77c2d7e42$exports.ERROR),$dc0cb7d118b5c913$export$71511d61b312f219($06309653d01c5828$var$_obj,5,$026025f77c2d7e42$exports.FATAL),$dc0cb7d118b5c913$export$71511d61b312f219($06309653d01c5828$var$_obj,6,$026025f77c2d7e42$exports.OFF),$06309653d01c5828$var$_obj),$6e4e8de703391db2$export$e01a0ce8cd4b690a=(()=>{function r(e,t){$cd80bf694d0631b1$export$71511d61b312f219(this,r),this._logLevel=$06309653d01c5828$export$87e5888863658dcc.ERROR,this.logger=t,this.tracker=$2c150599ea49b34a$export$2e2bcd8739ae039({client:r.CLIENT_NAME,clientVersion:r.CLIENT_VERSION,sessionId:e,baseUrl:r.EVT_ENDPOINT,instanceId:$86c5e230eba4f632$export$d2ca453b913dcdea.randomizeInteger().toString(),logLevel:$06309653d01c5828$export$26ac5bc6e09a3af6[this._logLevel]})}return $62cc9eefa616c344$export$71511d61b312f219(r,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){this._logLevel=e,this.tracker.setLogLevel($06309653d01c5828$export$26ac5bc6e09a3af6[e])}},{key:"logEvent",value:function(t){var r=this;return $d4d656c304fff6fc$export$71511d61b312f219(function(){return $e04810f8dbeb1928$export$67ebef60e6f28a6(this,function(e){return[2,r.logEventInternal(t)]})})()}},{key:"logEventInternal",value:function(r){var a=this;return $d4d656c304fff6fc$export$71511d61b312f219(function(){return $e04810f8dbeb1928$export$67ebef60e6f28a6(this,function(e){return[2,new Promise(function(t){try{a.logger.debug("Logging event: ".concat(r.name," - ").concat(r.level)),a.tracker.event(r.name,void 0,r.payload,$06309653d01c5828$export$26ac5bc6e09a3af6[r.level]),a.logger.debug("Successfully logged event (".concat(r.name,").")),t()}catch(e){a.logger.error("Failed to log event (".concat(r.name,")"),e),t()}})]})})()}}]),r})(),$9ecb142aad0a6028$export$94c0504e844c22d2=($6e4e8de703391db2$export$e01a0ce8cd4b690a.CLIENT_NAME="mobile-sdk-message-bridge",$6e4e8de703391db2$export$e01a0ce8cd4b690a.CLIENT_VERSION=$e46f7c82eed16cd3$export$3ab5d4b363e83ecc,$6e4e8de703391db2$export$e01a0ce8cd4b690a.EVT_ENDPOINT=$e46f7c82eed16cd3$export$6f861d09917a31b9,(()=>{function r(){$cd80bf694d0631b1$export$71511d61b312f219(this,r),this.nativeReady=!1,this.receivers=[],this.queuedMessages=[],this.queuedKlarnaPaymentsMessages=[],this.version=$e46f7c82eed16cd3$export$3ab5d4b363e83ecc,this.eventListeners=[],this.handshakeResponseParamsMap={},this.base64Controller=new $ab11a08eff1af618$export$3b418aac0e066580,this.crossWindowController=new $4056916c3e7cc48b$export$8697e044b6ceac7e(this),this.nativeController=new $4fd8e36a662dd81b$export$d1b1e53e547a4664,this.receiverController=new $9e8cdbfcf67b38ba$export$fb16809fa2eec8fa;var e=$86c5e230eba4f632$export$d2ca453b913dcdea.createUUIDv4(),t=new $dc2b35112bcce9e2$export$efa9a398d6368992;this.dependencyContainer={sessionId:e,logger:t,analyticsController:new $6e4e8de703391db2$export$e01a0ce8cd4b690a(e,t)},this.base64Controller.overrideDefaults(),this.setupCrossWindowController(),this.messageController=new $af2a197b0dc9b6ac$export$2cabd05dec5a966a(this.dependencyContainer)}return $62cc9eefa616c344$export$71511d61b312f219(r,[{key:"addReceiver",value:function(t,e){try{this.receiverController.addReceiver(this,t,e),this.notifyEvent({name:"AddedReceiver",payload:{name:t}})}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("MessageBridge.addReceiver failed.",e),this.notifyEvent({name:"AddReceiverFailed",payload:{name:t,error:e.toString()}})}}},{key:"removeReceiver",value:function(t,e){try{this.receiverController.removeReceiver(this,t,e),this.notifyEvent({name:"RemovedReceiver",payload:{name:t}})}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("MessageBridge.removeReceiver failed.",e),this.notifyEvent({name:"RemoveReceiverFailed",payload:{name:t,error:e.toString()}})}}},{key:"postMessage",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{this.messageController.postMessage(this,t,e),e&&t.sender!==$0f3b9fcdcc260be5$export$a002182e51710d39.ReceiverName.Native&&$dc2b35112bcce9e2$export$efa9a398d6368992.default.info("MessageBridge.postMessage native forwarded message from component to another component.",t)}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("MessageBridge.postMessage failed.",e),this.notifyEvent({name:"PostMessageFailed",payload:{action:t.action,sender:t.sender,receiver:t.receiver,error:e.toString()}})}}},{key:"isNativeReady",value:function(){return this.nativeController.isNativeReady(this)}},{key:"isNativeReadyAsync",value:function(){return this.nativeController.isNativeReadyAsync(this)}},{key:"setNativeReady",value:function(){try{this.nativeController.setNativeReady(this),this.reportEndpoints()}catch(e){$dc2b35112bcce9e2$export$efa9a398d6368992.default.error("MessageBridge.setNativeReady failed.",e),this.notifyEvent({name:"NativeHookSetNativeReadyFailed",payload:{receivers:this.receivers.toString(),queuedMessages:this.queuedMessages.toString(),error:e.toString()}})}}},{key:"inSdkWebView",value:function(){try{return this.nativeController.isSdkWebView(this)}catch(e){return $dc2b35112bcce9e2$export$efa9a398d6368992.default.error("MessageBridge.inSdkWebView failed.",e),!1}}},{key:"inSdkWebViewAsync",value:function(){return this.nativeController.isSdkWebViewAsync(this)}},{key:"addEventListener",value:function(e){this.eventListeners.indexOf(e)<=-1&&this.eventListeners.push(e)}},{key:"removeEventListener",value:function(t){this.eventListeners=this.eventListeners.filter(function(e){return e!=t})}},{key:"notifyEvent",value:function(t){this.eventListeners.forEach(function(e){return e(t)})}},{key:"compareVersion",value:function(e,t){try{return $86c5e230eba4f632$export$d2ca453b913dcdea.compareVersion(e,t)}catch(e){return $dc2b35112bcce9e2$export$efa9a398d6368992.default.error("MessageBridge.compareVersion failed.",e),0}}},{key:"destroy",value:function(){this.teardownCrossWindowController()}},{key:"setupCrossWindowController",value:function(){var e;this.crossWindowController.register(this),this.crossWindowController.mode===$fa9011cb1dfb6667$export$caf75cbffb0ca40.Frame?(e=new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsNativeReadyRequest,null),this.crossWindowController.postMessage(e),e=new $3f8d71218c98a45f$export$137d9274eb4bdc8d($ec5a25b0ccdbabd5$export$d6ff711ee8724594.IsSdkWebViewRequest,null),this.crossWindowController.postMessage(e)):this.nativeController.isSdkWebView(this),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowController Setup")}},{key:"teardownCrossWindowController",value:function(){this.crossWindowController.unregister(),$dc2b35112bcce9e2$export$efa9a398d6368992.default.debug("CrossWindowController Teardown")}},{key:"reportEndpoints",value:function(){var e=new $e27faf65630ebc9a$export$e12b769011d096b4(this.version,new $f12b5d7f8ad4b8dc$export$33b0bc6879c27206($a527415fb53b3e91$export$eed022e50baffed5.Analytics.Staging,$a527415fb53b3e91$export$eed022e50baffed5.Analytics.Production),new $f12b5d7f8ad4b8dc$export$33b0bc6879c27206($a527415fb53b3e91$export$eed022e50baffed5.DeviceData.Staging,$a527415fb53b3e91$export$eed022e50baffed5.DeviceData.Production));this.messageController.postEventMessageToNative(this,new $54e9de874e7cf259$export$468fbe6771f1699e($b4efb1694e6b9d0a$export$a96b0bbdbd70b734.EndpointsReported,null,null,e))}}]),r})());try{null==window.__KlarnaNativeHook?window.__KlarnaNativeHook=new $9ecb142aad0a6028$export$94c0504e844c22d2:1===$86c5e230eba4f632$export$d2ca453b913dcdea.compareVersion($e46f7c82eed16cd3$export$3ab5d4b363e83ecc,window.__KlarnaNativeHook.version)&&$86c5e230eba4f632$export$d2ca453b913dcdea.replaceBridge(window.__KlarnaNativeHook,new $9ecb142aad0a6028$export$94c0504e844c22d2)}catch(e){console.error("__KlarnaNativeHook MessageBridge initialization failed.",e)}