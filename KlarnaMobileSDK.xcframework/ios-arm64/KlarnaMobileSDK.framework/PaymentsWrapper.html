<!doctype html><html><head><meta http-equiv="Content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover"/><meta http-equiv="Content-Security-Policy" content="object-src 'none'; base-uri 'none'; frame-ancestors 'none';"/><title>Payment View</title><script>/*! For license information please see app.js.LICENSE.txt */
(()=>{var e={424:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(81),a=r.n(n),i=r(645),o=r.n(i)()(a());o.push([e.id,"* {\n    margin: 0;\n    padding: 0;\n}\n\nbody {\n    background-color: #fff;\n}\n\n#payment-container {\n    text-align: center;\n    vertical-align: text-top;\n    padding: \n        env(safe-area-inset-top, 20px)\n        env(safe-area-inset-right, 20px)\n        env(safe-area-inset-bottom, 20px)\n        env(safe-area-inset-left, 20px);\n}",""]);const s=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);n&&o[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),r&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=r):c[2]=r),a&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=a):c[4]="".concat(a)),t.push(c))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},379:e=>{"use strict";var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var i={},o=[],s=0;s<e.length;s++){var l=e[s],d=n.base?l[0]+n.base:l[0],c=i[d]||0,u="".concat(d," ").concat(c);i[d]=c+1;var p=r(u),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var h=a(f,n);n.byIndex=s,t.splice(s,0,{identifier:u,updater:h,references:1})}o.push(u)}return o}function a(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,a){var i=n(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var s=r(i[o]);t[s].references--}for(var l=n(e,a),d=0;d<i.length;d++){var c=r(i[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}i=l}}},569:e=>{"use strict";var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var a=void 0!==r.layer;a&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,a&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},449:function(e,t,r){!function(e){"use strict";var t,r=function(){try{if(e.URLSearchParams&&"bar"===new e.URLSearchParams("foo=bar").get("foo"))return e.URLSearchParams}catch(e){}return null}(),n=r&&"a=1"===new r({a:1}).toString(),a=r&&"+"===new r("s=%2B").get("s"),i=r&&"size"in r.prototype,o="__URLSearchParams__",s=!r||((t=new r).append("s"," &"),"s=+%26"===t.toString()),l=f.prototype,d=!(!e.Symbol||!e.Symbol.iterator);if(!(r&&n&&a&&s&&i)){l.append=function(e,t){v(this[o],e,t)},l.delete=function(e){delete this[o][e]},l.get=function(e){var t=this[o];return this.has(e)?t[e][0]:null},l.getAll=function(e){var t=this[o];return this.has(e)?t[e].slice(0):[]},l.has=function(e){return b(this[o],e)},l.set=function(e,t){this[o][e]=[""+t]},l.toString=function(){var e,t,r,n,a=this[o],i=[];for(t in a)for(r=h(t),e=0,n=a[t];e<n.length;e++)i.push(r+"="+h(n[e]));return i.join("&")};var c,u=e.Proxy&&r&&(!a||!s||!n||!i);u?(c=new Proxy(r,{construct:function(e,t){return new e(new f(t[0]).toString())}})).toString=Function.prototype.toString.bind(f):c=f,Object.defineProperty(e,"URLSearchParams",{value:c});var p=e.URLSearchParams.prototype;p.polyfill=!0,!u&&e.Symbol&&(p[e.Symbol.toStringTag]="URLSearchParams"),"forEach"in p||(p.forEach=function(e,t){var r=y(this.toString());Object.getOwnPropertyNames(r).forEach((function(n){r[n].forEach((function(r){e.call(t,r,n,this)}),this)}),this)}),"sort"in p||(p.sort=function(){var e,t,r,n=y(this.toString()),a=[];for(e in n)a.push(e);for(a.sort(),t=0;t<a.length;t++)this.delete(a[t]);for(t=0;t<a.length;t++){var i=a[t],o=n[i];for(r=0;r<o.length;r++)this.append(i,o[r])}}),"keys"in p||(p.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),g(e)}),"values"in p||(p.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),g(e)}),"entries"in p||(p.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),g(e)}),d&&(p[e.Symbol.iterator]=p[e.Symbol.iterator]||p.entries),"size"in p||Object.defineProperty(p,"size",{get:function(){var e=y(this.toString());if(p===this)throw new TypeError("Illegal invocation at URLSearchParams.invokeGetter");return Object.keys(e).reduce((function(t,r){return t+e[r].length}),0)}})}function f(e){((e=e||"")instanceof URLSearchParams||e instanceof f)&&(e=e.toString()),this[o]=y(e)}function h(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function m(e){return e.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,(function(e){return decodeURIComponent(e)}))}function g(t){var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return d&&(r[e.Symbol.iterator]=function(){return r}),r}function y(e){var t={};if("object"==typeof e)if(_(e))for(var r=0;r<e.length;r++){var n=e[r];if(!_(n)||2!==n.length)throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements");v(t,n[0],n[1])}else for(var a in e)e.hasOwnProperty(a)&&v(t,a,e[a]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var i=e.split("&"),o=0;o<i.length;o++){var s=i[o],l=s.indexOf("=");-1<l?v(t,m(s.slice(0,l)),m(s.slice(l+1))):s&&v(t,m(s),"")}}return t}function v(e,t,r){var n="string"==typeof r?r:null!=r&&"function"==typeof r.toString?r.toString():JSON.stringify(r);b(e,t)?e[t].push(n):e[t]=[n]}function _(e){return!!e&&"[object Array]"===Object.prototype.toString.call(e)}function b(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(void 0!==r.g?r.g:"undefined"!=typeof window?window:this)}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={id:n,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nc=void 0,(()=>{"use strict";var e;!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.None=4]="None"}(e||(e={}));var t,n=function(){function t(){this._logLevel=e.None,this._logDelegate=null}return Object.defineProperty(t.prototype,"level",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"delegate",{get:function(){return this._logDelegate},set:function(e){this._logDelegate=e},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logLevel===e.Debug&&(null!=this._logDelegate&&this._logDelegate.logDebug(this._stringifyParams(t)),console.log.apply(console,t))},t.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logLevel<=e.Info&&(null!=this._logDelegate&&this._logDelegate.logDebug(this._stringifyParams(t)),console.info.apply(console,t))},t.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logLevel<=e.Warn&&(null!=this._logDelegate&&this._logDelegate.logDebug(this._stringifyParams(t)),console.warn.apply(console,t))},t.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._logLevel<=e.Error&&(null!=this._logDelegate&&this._logDelegate.logError(this._stringifyParams(t)),console.error.apply(console,t))},t.prototype._stringifyParams=function(e){try{return JSON.stringify(e,null,2)}catch(e){return"Couldn't stringify logging params."}},t.default=new t,t}(),a=function(){function e(){}return e.prototype.parseTokenV1=function(e){try{var t=e.split(".");if(t.length<2)return null;var r=t[1].replace("-","+").replace("_","/"),n=atob(r),a=JSON.parse(n);if(this._isKlarnaPaymentsToken(a))return a}catch(e){return null}return null},e.prototype._isKlarnaPaymentsToken=function(e){var t=e;return"string"==typeof t.client_event_base_url&&"string"==typeof t.environment&&"string"==typeof t.language&&"string"==typeof t.merchant_name&&"string"==typeof t.purchase_country&&"string"==typeof t.session_id&&"string"==typeof t.session_type},e}(),i=function(){function e(){}return e.randomString=function(e){void 0===e&&(e=10);for(var t="",r=0;r<e;r++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t},e.capitalizeString=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.commaSplitString=function(e){return e.split(/[,]+[\s]*/)},e.createUUIDv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},e.find=function(e,t,r){if(void 0!==Array.prototype.find)return e.find(t,r);if(!(null!==e&&e instanceof Array))throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var n=Object(e),a=n.length>>>0,i=0;i<a;i++){var o=n[i];if(t.call(r,o,i,n))return o}},e}();!function(e){e.PageLoad="PageLoad",e.SdkFound="SdkFound",e.SdkNotFound="SdkNotFound",e.MsgCtrlCreated="MsgCtrlCreated",e.PerformingAddMessageBridge="AddingMessageBridge",e.MessageBridgeAlreadyAdded="MessageBridgeAlreadyAdded",e.MessageBridgeAdded="MessageBridgeAdded",e.MessageBridgeLoadError="MessageBridgeLoadError",e.PerformedAddMessageBridge="PerformedAddMessageBridge",e.MsgCtrlInitializing="MsgCtrlInitializing",e.MsgCtrlInitCalledAddPaymentsLib="MsgCtrlInitCalledAddPaymentsLib",e.MsgCtrlInitCalledNativeAddMsgCallback="MsgCtrlInitCalledNativeAddMsgCallback",e.MsgCtrlInitCalledNativeAddReceiver="MsgCtrlInitCalledNativeAddReceiver",e.MsgCtrlInitCalledSendHandshake="MsgCtrlInitCalledSendHandshake",e.PerformingAddPaymentsLib="AddingPaymentsLib",e.PaymentsLibAlreadyAdded="PaymentsLibAlreadyAdded",e.PaymentsLibAdded="PaymentsLibAdded",e.PaymentsLibLoadError="PaymentsLibLoadError",e.PerformedAddPaymentsLib="PerformedAddPaymentsLib",e.RecvdInitialize="RecvdInitialize",e.ValidatedInitialize="ValidatedInitialize",e.PerformingInitialize="PerformingInitialize",e.PerformedInitialize="PerformedInitialize",e.SentInitializeResp="SentInitializeResp",e.InitializeException="InitializeException",e.RecvdLoad="RecvdLoad",e.ValidatedLoad="ValidatedLoad",e.PerformingLoad="PerformingLoad",e.PerformedLoad="PerformedLoad",e.GotLoadCallb="GotLoadCallb",e.SentLoadResp="SentLoadResp",e.LoadException="LoadException",e.RecvdLoadPaymentReview="RecvdLoadPaymentReview",e.ValidatedLoadPaymentReview="ValidatedLoadPaymentReview",e.PerformingLoadPaymentReview="PerformingLoadPaymentReview",e.PerformedLoadPaymentReview="PerformedLoadPaymentReview",e.GotLoadPaymentReviewCallb="GotLoadPaymentReviewCallb",e.SentLoadPaymentReviewResp="SentLoadPaymentReviewResp",e.LoadPaymentReviewException="LoadPaymentReviewException",e.RecvdAuthorize="RecvdAuthorize",e.ValidatedAuthorize="ValidatedAuthorize",e.PerformingAuthorize="PerformingAuthorize",e.PerformedAuthorize="PerformedAuthorize",e.GotAuthorizeCallb="GotAuthorizeCallb",e.SentAuthorizeResp="SentAuthorizeResp",e.AuthorizeException="AuthorizeException",e.RecvdReauthorize="RecvdReauthorize",e.ValidatedReauthorize="ValidatedReauthorize",e.PerformingReauthorize="PerformingReauthorize",e.PerformedReauthorize="PerformedReauthorize",e.GotReauthorizeCallb="GotReauthorizeCallb",e.SentReauthorizeResp="SentReauthorizeResp",e.ReauthorizeException="ReauthorizeException",e.RecvdFinalize="RecvdFinalize",e.ValidatedFinalize="ValidatedFinalize",e.PerformingFinalize="PerformingFinalize",e.PerformedFinalize="PerformedFinalize",e.GotFinalizeCallb="GotFinalizeCallb",e.SentFinalizeResp="SentFinalizeResp",e.FinalizeException="FinalizeException",e.WrapperError="WrapperError"}(t||(t={}));var o,s=function(){function e(){this.additionalParams=null,this.event="undefined",this.sid=i.createUUIDv4(),this.timestamp=Date.now()/1e3,this.wrapper={release:"wrapper-v2",version:"undefined",environment:"undefined"},this.device={os:"undefined",osVersion:"undefined",model:"undefined"},this.sdk={name:"undefined",version:"undefined",buildNumber:"undefined",sid:"undefined"},this.merchant={name:"undefined",packageName:"undefined",version:"undefined",buildNumber:"undefined"},this.kp={token:{environment:"undefined",language:"undefined",merchantName:"undefined",purchaseCountry:"undefined",sessionId:"undefined",sessionType:"undefined"},paymentMethodCategory:"undefined"},this.state={wrapper:{addedPaymentsLibrary:!1,gotAFatalError:!1},kp:{didInitialize:!1,didLoad:!1,didAuthorize:!1,didReauthorize:!1,didFinalize:!1}},this.additionalParams=null}return e.prototype.updateNativeParamsFromMessage=function(e){this.sdk.name=e.params.nativeName||"undefined",this.sdk.version=e.params.nativeVersion||"undefined",this.sdk.buildNumber=e.params.nativeBuildNumber||"undefined",this.sdk.sid=e.params.sid||"undefined",this.device.model=e.params.deviceName||"undefined",this.device.os=e.params.osName||"undefined",this.device.osVersion=e.params.osVersion||"undefined",this.merchant.name=e.params.merchantAppName||"undefined",this.merchant.packageName=e.params.merchantAppID||"undefined",this.merchant.version=e.params.merchantAppVersion||"undefined",this.merchant.buildNumber=e.params.merchantAppBuildNumber||"undefined"},e.prototype.updateKPParamsFromToken=function(e){this.kp.token.environment=e.environment,this.kp.token.language=e.language,this.kp.token.merchantName=e.merchant_name,this.kp.token.purchaseCountry=e.purchase_country,this.kp.token.sessionId=e.session_id,this.kp.token.sessionType=e.session_type},e.prototype.updatePaymentMethodCategories=function(e){this.kp.paymentMethodCategory=e},e.prototype.updateWithEvent=function(e,r){this.event=e,this.timestamp=Date.now()/1e3,this.additionalParams=r||null,e===t.PaymentsLibAdded?this.state.wrapper.addedPaymentsLibrary=!0:e===t.PerformedInitialize?this.state.kp.didInitialize=!0:e===t.GotLoadCallb?this.state.kp.didLoad=!0:e===t.GotAuthorizeCallb?this.state.kp.didAuthorize=!0:e===t.GotReauthorizeCallb?this.state.kp.didReauthorize=!0:e===t.GotFinalizeCallb&&(this.state.kp.didFinalize=!0)},e}(),l=function(){function e(e,t){this._wrapperVersion="v1.1.4-a7f3be7d3a5",this._analyticsData=new s,this._analyticsData.wrapper.environment=e,this._analyticsData.wrapper.version=this._wrapperVersion,this._endpoint=t}return e.prototype.setSessionTokenString=function(e){var t=(new a).parseTokenV1(e);n.default.debug("Token parsed: ",null!=t),null!=t&&this._analyticsData.updateKPParamsFromToken(t)},e.prototype.setHandshakeMessage=function(e){this._analyticsData.updateNativeParamsFromMessage(e)},e.prototype.setPaymentMethodCategories=function(e){this._analyticsData.updatePaymentMethodCategories(e)},e.prototype.reportEvent=function(e,t){if(this._analyticsData.updateWithEvent(e,t),"SHEIN"===this._analyticsData.merchant.name||"com.zzkko"===this._analyticsData.merchant.packageName||"zzkko.com.ZZKKO"===this._analyticsData.merchant.packageName){var r=JSON.stringify(this._analyticsData);this._sendEvent(e,r)}},e.prototype._sendEvent=function(e,t){n.default.debug("Sending event: "+e);var r="https://".concat(this._endpoint.analyticsHost)+"/v1/in-app/kpwrapper-web-"+(this._wrapperVersion.startsWith("v")?this._wrapperVersion.includes("-")?this._wrapperVersion.split("-")[0]:this._wrapperVersion:"undefined")+"/"+e;setTimeout((function(){window.fetch&&fetch(r,{method:"POST",body:t,mode:"no-cors"})}),0)},e}(),d=function(e,t,r){void 0===r&&(r={}),this.action=e,this.sender=t,this.receiver="Native",this.params=r,this.messageId=i.randomString()},c=function(){function e(e,t,r,n,a){this.isPublic=!1,this.isFatal=!1,this.name=e,this.message=t,this.fields=r,this.showForm=n,this.action=a}return e.prototype.toParams=function(){var e={actionType:"errorResponse"};return e.error=this.name,e.message=this.message,e.isPublic=1==this.isPublic?"true":"false",e.isFatal=1==this.isFatal?"true":"false",null!=this.fields&&(e.fields=JSON.stringify(this.fields)),null!=this.showForm&&(e.showForm=1==this.showForm?"true":"false"),null!=this.action&&(e.action=this.action),e},e}(),u=function(){function e(){}return e.UnrecognizedAction=new c("UnrecognizedActionError","Couldn't recognize the action sent to us."),e.NotMockingKp=new c("NotWrappingKpError","Got a KP action despite not wrapping it."),e.LibraryNotAdded=new c("PaymentsLibyNotAddedError","Got message to Payments Library, but it hasn't been added yet."),e.ParseBase64Failed=new c("ParsingBase64Error","Error parsing base 64 from message."),e.ParseStringFailed=new c("ParseStringFailed","Error parsing string from message."),e.AddingPaymentsLibFailed=new c("AddPaymentsLibError","Error adding Payments Library."),e.PaymentsLibInitFailed=new c("PaymentsLibInitError","Error performing Klarna.Payments.init()."),e.PaymentsLibLoadFailed=new c("PaymentsLibLoadError","Error performing Klarna.Payments.load()."),e.PaymentsLibLoadPaymentReviewFailed=new c("PaymentsLibLoadPaymentReviewError","Error performing Klarna.Payments.loadPaymentReview()."),e.PaymentsLibAuthorizeFailed=new c("PaymentsLibAuthorizeError","Error performing Klarna.Payments.authorize()."),e.PaymentsLibReauthorizeFailed=new c("PaymentsLibReauthorizeError","Error performing Klarna.Payments.reauthorize()."),e.PaymentsLibFinalizeFailed=new c("PaymentsLibFinalizeError","Error performing Klarna.Payments.finalize()."),e}(),p=function(){function e(e,t,r,n,a){this._libraryAdded=!1,this._asyncCallbackTriggered=!1,this._customLibraryUrl=null,this._customLibraryVersion=null,this._customAppVersion=null,this._customLibraryUrl=e,this._customLibraryVersion=t,this._customAppVersion=r,this._endpoint=n,this._analyticsController=a,window.klarnaAsyncCallback=this.asyncCallbackTriggered.bind(this)}return Object.defineProperty(e.prototype,"libraryAdded",{get:function(){return this._libraryAdded},enumerable:!1,configurable:!0}),e.prototype.asyncCallbackTriggered=function(){this._asyncCallbackTriggered=!0,n.default.warn("Async callback triggered."),n.default.warn(JSON.stringify(this,null,2)),null!=this._asyncCallbackInitializeBlock&&(this._asyncCallbackInitializeBlock(),this._asyncCallbackInitializeBlock=void 0)},e.prototype.addPaymentsLibrary=function(e,r,a){var i=this;n.default.debug("Adding Klarna Payments Library into page head."),this._logAnalyticsEvt(t.PerformingAddPaymentsLib);var o="PaymentsLibraryScript";if(null!=document.getElementById(o))return n.default.warn("Payments Library already added to page. Won't add it again."),this._logAnalyticsEvt(t.PaymentsLibAlreadyAdded),void a(!1);n.default.debug("Creating script element for Payments Library as #".concat(o,"."));var s=document.createElement("script");s.src=this._customLibraryUrl||"https://".concat(this._endpoint.assetsHost,"/kp/lib/").concat(this._customLibraryVersion||"v1","/api.js?cb=").concat(Date.now()),s.async=!1,s.addEventListener("load",(function(){i._libraryAdded=!0,n.default.debug("Payments Library added."),i._logAnalyticsEvt(t.PaymentsLibAdded),a(!0)})),s.addEventListener("error",(function(o){n.default.error("Error adding Payments Lib.",o),i._logAnalyticsEvt(t.PaymentsLibLoadError);var s=u.AddingPaymentsLibFailed;e.sendError(s,r),a(!1)})),s.id=o,document.head.appendChild(s),this._logAnalyticsEvt(t.PerformedAddPaymentsLib)},e.prototype.performInitialize=function(e,r,a){var i=this;if(!this._asyncCallbackTriggered)return n.default.warn("Async callback not triggered, postponing initialize."),void(this._asyncCallbackInitializeBlock=function(){n.default.warn("Async callback triggered, performing initialize."),i.performInitialize(e,r,a)});n.default.debug("Performing Klarna.Payments.init()."),this._logAnalyticsEvt(t.PerformingInitialize);try{null!=this._customAppVersion&&(window.Klarna.Payments.__APP_VERSION__=this._customAppVersion),window.Klarna.Payments.init(e),this._logAnalyticsEvt(t.PerformedInitialize);var o=new d("actionToNative",r.componentName);o.params.actionType="initializeResponse",a.sendMessage(o,null),this._logAnalyticsEvt(t.SentInitializeResp)}catch(e){n.default.error("Error performing Klarna.Payments.init().",e),this._logAnalyticsEvt(t.InitializeException,{error:JSON.stringify(e)});var s=u.PaymentsLibInitFailed;s.action="Initialize",s.name=e.name||s.name,s.isPublic=!0,r.sendError(s,a)}},e.prototype.performLoad=function(e,r,a,i){var o=this;n.default.debug("Performing Klarna.Payments.load()."),this._logAnalyticsEvt(t.PerformingLoad);try{document.getElementById(e.container.substr(1)).innerHTML="",window.Klarna.Payments.load(e,r,(function(e){if(!e.show_form){var r=new Error("Show form set to false.");return r.name="ShowFormFalseError",void o.logLoadError(r,a,i,!0)}o._logAnalyticsEvt(t.GotLoadCallb,{showForm:e.show_form.toString(),error:e.error?JSON.stringify(e.error):""});var n=new d("actionToNative",a.componentName);n.params.actionType="loadResponse";var s={show_form:e.show_form,error:e.error};o._addPaymentsLibResultToMessage(s,n),i.sendMessage(n,null),o._logAnalyticsEvt(t.SentLoadResp)})),this._logAnalyticsEvt(t.PerformedLoad)}catch(e){this.logLoadError(e,a,i)}},e.prototype.logLoadError=function(e,r,a,i){void 0===i&&(i=!1),n.default.error("Error performing Klarna.Payments.load().",e),this._logAnalyticsEvt(t.LoadException,{error:JSON.stringify(e)});var o=u.PaymentsLibLoadFailed;o.action="Load",o.name=e.name||o.name,o.isPublic=!0,o.isFatal=i,r.sendError(o,a)},e.prototype.performLoadPaymentReview=function(e,r,a){var i=this;n.default.debug("Performing Klarna.Payments.loadPaymentReview()."),this._logAnalyticsEvt(t.PerformingLoadPaymentReview);try{document.getElementById(e.container.substr(1)).innerHTML="",window.Klarna.Payments.loadPaymentReview(e,(function(e){if(!e.show_form){var n=new Error("Show form set to false.");return n.name="ShowFormFalseError",void i.logLoadPaymentReviewError(n,r,a,!0)}i._logAnalyticsEvt(t.GotLoadPaymentReviewCallb,{showForm:e.show_form.toString()});var o=new d("actionToNative",r.componentName);o.params.actionType="loadPaymentReviewResponse";var s={show_form:e.show_form};i._addPaymentsLibResultToMessage(s,o),a.sendMessage(o,null),i._logAnalyticsEvt(t.SentLoadPaymentReviewResp)})),this._logAnalyticsEvt(t.PerformedLoadPaymentReview)}catch(e){n.default.error("Error performing Klarna.Payments.loadPaymentReview().",e),this._logAnalyticsEvt(t.LoadPaymentReviewException,{error:JSON.stringify(e)});var o=u.PaymentsLibLoadPaymentReviewFailed;o.action="LoadPaymentReview",o.name=e.name||o.name,o.isPublic=!0,r.sendError(o,a)}},e.prototype.logLoadPaymentReviewError=function(e,r,a,i){void 0===i&&(i=!1),n.default.error("Error performing Klarna.Payments.loadPaymentReview().",e),this._logAnalyticsEvt(t.LoadPaymentReviewException,{error:JSON.stringify(e)});var o=u.PaymentsLibLoadPaymentReviewFailed;o.action="Load",o.name=e.name||o.name,o.isPublic=!0,o.isFatal=i,r.sendError(o,a)},e.prototype.performAuthorize=function(e,r,a,i){var o=this;n.default.debug("Performing Klarna.Payments.authorize()."),this._logAnalyticsEvt(t.PerformingAuthorize);try{window.Klarna.Payments.authorize(e,r,(function(e){if(!e.show_form){var r=new Error("Show form set to false.");return r.name="ShowFormFalseError",void o.logAuthError(r,a,i,!0)}o._logAnalyticsEvt(t.GotAuthorizeCallb,{showForm:e.show_form.toString(),approved:e.approved?e.approved.toString():"undefined",error:e.error?JSON.stringify(e.error):"",finalizeRequired:e.finalize_required?e.finalize_required.toString():"undefined"});var n=new d("actionToNative",a.componentName);n.params.actionType="authorizeResponse";var s={authorization_token:e.authorization_token,show_form:e.show_form,approved:!0===e.approved,finalize_required:!0===e.finalize_required,error:e.error};o._addPaymentsLibResultToMessage(s,n),i.sendMessage(n,null),o._logAnalyticsEvt(t.SentAuthorizeResp)})),this._logAnalyticsEvt(t.PerformedAuthorize)}catch(e){this.logAuthError(e,a,i)}},e.prototype.logAuthError=function(e,r,a,i){void 0===i&&(i=!1),n.default.error("Error performing Klarna.Payments.authorize().",e),this._logAnalyticsEvt(t.AuthorizeException,{error:JSON.stringify(e)});var o=u.PaymentsLibAuthorizeFailed;o.action="Authorize",o.name=e.name||o.name,o.isPublic=!0,o.isFatal=i,r.sendError(o,a)},e.prototype.performReauthorize=function(e,r,a,i){var o=this;n.default.debug("Performing Klarna.Payments.reauthorize()."),this._logAnalyticsEvt(t.PerformingReauthorize);try{window.Klarna.Payments.reauthorize(e,r,(function(e){if(!e.show_form){var r=new Error("Show form set to false.");return r.name="ShowFormFalseError",void o.logReauthError(r,a,i,!0)}o._logAnalyticsEvt(t.GotReauthorizeCallb,{showForm:e.show_form.toString(),approved:e.approved?e.approved.toString():"undefined",error:e.error?JSON.stringify(e.error):""});var n=new d("actionToNative",a.componentName);n.params.actionType="reauthorizeResponse";var s={authorization_token:e.authorization_token,show_form:e.show_form,approved:!0===e.approved,error:e.error};o._addPaymentsLibResultToMessage(s,n),i.sendMessage(n,null),o._logAnalyticsEvt(t.SentReauthorizeResp)})),this._logAnalyticsEvt(t.PerformedReauthorize)}catch(e){this.logReauthError(e,a,i)}},e.prototype.logReauthError=function(e,r,a,i){void 0===i&&(i=!1),n.default.error("Error performing Klarna.Payments.reauthorize().",e),this._logAnalyticsEvt(t.ReauthorizeException,{error:JSON.stringify(e)});var o=u.PaymentsLibReauthorizeFailed;o.action="Reauthorize",o.name=e.name||o.name,o.isPublic=!0,o.isFatal=i,r.sendError(o,a)},e.prototype.performFinalize=function(e,r,a,i){var o=this;n.default.debug("Performing Klarna.Payments.finalize()."),this._logAnalyticsEvt(t.PerformedFinalize);try{window.Klarna.Payments.finalize(e,r,(function(e){if(!e.show_form){var r=new Error("Show form set to false.");return r.name="ShowFormFalseError",void o.logFinalizeError(r,a,i,!0)}o._logAnalyticsEvt(t.GotFinalizeCallb,{showForm:e.show_form.toString(),approved:e.approved?e.approved.toString():"undefined",error:e.error?JSON.stringify(e.error):""});var n=new d("actionToNative",a.componentName);n.params.actionType="finalizeResponse";var s={authorization_token:e.authorization_token,show_form:e.show_form,approved:!0===e.approved,error:e.error};o._addPaymentsLibResultToMessage(s,n),i.sendMessage(n,null),o._logAnalyticsEvt(t.SentFinalizeResp)})),this._logAnalyticsEvt(t.PerformedFinalize)}catch(e){this.logFinalizeError(e,a,i)}},e.prototype.logFinalizeError=function(e,r,a,i){void 0===i&&(i=!1),n.default.error("Error performing Klarna.Payments.finalize().",e),this._logAnalyticsEvt(t.FinalizeException,{error:JSON.stringify(e)});var o=u.PaymentsLibFinalizeFailed;o.action="Finalize",o.name=e.name||o.name,o.isPublic=!0,o.isFatal=i,r.sendError(o,a)},e.prototype._addPaymentsLibResultToMessage=function(e,t){for(var r in e)if(e.hasOwnProperty(r))if("show_form"===r){var a=e[r];null!=a&&(t.params.showForm=a.toString())}else if("error"===r)for(var i in e[r])"invalid_fields"===i?t.params.invalidFields=JSON.stringify(e[r][i],null,2):n.default.warn("Got unrecognized field in error from Payments Library: ".concat(i,". Will not forward it to the SDK."));else if("authorization_token"===r){var o=e[r];null!=o&&(t.params.authToken=o.toString(),t.params.authorizationToken=o.toString())}else if("approved"===r){var s=e[r];null!=s&&(t.params.approved=s.toString())}else if("finalize_required"===r){var l=e[r];null!=l&&(t.params.finalizeRequired=l.toString())}else n.default.warn("Got unrecognized field from Payments Library: ".concat(r,". Will not forward it to the SDK."))},e.prototype._logAnalyticsEvt=function(e,t){null!=this._analyticsController&&this._analyticsController.reportEvent(e,t)},e}(),f=function(){function e(){}return e.prototype.parseUtf8Base64=function(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))},e}();!function(e){e[e.AsString=0]="AsString",e[e.AsStringAry=1]="AsStringAry",e[e.AsBoolean=2]="AsBoolean",e[e.Base64EncodedObj=3]="Base64EncodedObj"}(o||(o={}));var h=function(){function e(e,r,n){this._errors=[],this._messages=[],this._mockKpMethods=e,this._componentName=(this._mockKpMethods,"KlarnaPaymentsWrapper"),this._analyticsController=n,this._storeErrorsAndMessages=r,this._logAnalyticsEvt(t.MsgCtrlCreated,{MockKpMethods:e.toString(),ComponentName:this._componentName})}return Object.defineProperty(e.prototype,"mocksKpClientMethods",{get:function(){return this._mockKpMethods},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentName",{get:function(){return this._componentName},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e,r){var a=this;n.default.debug("Initializing MessageController."),this._logAnalyticsEvt(t.MsgCtrlInitializing),this._logAnalyticsEvt(t.MsgCtrlInitCalledAddPaymentsLib),r.addPaymentsLibrary(this,e,(function(){e.addMessageCallback((function(e,t){a._receivedMessage(e,t,r)})),a._logAnalyticsEvt(t.MsgCtrlInitCalledNativeAddMsgCallback),e.addAsReceiver(a._componentName),a._logAnalyticsEvt(t.MsgCtrlInitCalledNativeAddReceiver),e.sendHandshake((function(e){null!=a._analyticsController&&null!=e&&a._analyticsController.setHandshakeMessage(e)})),a._logAnalyticsEvt(t.MsgCtrlInitCalledSendHandshake),a._initializeResizeObserver(e)}))},e.prototype._initializeResizeObserver=function(e){if(window.ResizeObserver){var t=document.querySelector("#payment-container"),r=new ResizeObserver((function(t){for(var r=0,a=t;r<a.length;r++){var i=a[r];if(n.default.debug("New dimensions found: ",i),i.contentRect){var o=i.contentRect.height;o<5e3&&e.sendResizeEvent(o)}}n.default.debug("Container size changed")}));null!=t&&r.observe(t),n.default.debug("Resize observer initialized")}else n.default.debug("ResizeObserver not supported"),document.addEventListener("resize",(function(){var t=document.querySelector("#payment-container");if(null!=t){var r=t.scrollHeight;r<5e3&&e.sendResizeEvent(r)}}))},e.prototype.sendError=function(e,r){this._logAnalyticsEvt(t.WrapperError,{error:e.name,message:e.message}),this._storeErrorsAndMessages&&this._errors.push(e),r.sendMessage(new d("actionToNative",this._componentName,e.toParams()),null)},e.prototype._receivedMessage=function(e,r,a){this._storeErrorsAndMessages&&this._messages.push(e);var o=null!=i.find(["initialize","load","loadPaymentReview","authorize","reauthorize","finalize"],(function(t){return t===e.params.actionType}));if(o&&!a.libraryAdded)return n.default.error("Received a message to forward to Payments Library, but it's not loaded."),void this.sendError(u.LibraryNotAdded,r);if(o&&!this._mockKpMethods)return n.default.error("Received a message wrapper should mock, but wrapper is not mocking KP."),void this.sendError(u.NotMockingKp,r);if(o&&this._mockKpMethods){var s=e.params.actionType;"initialize"===s?(this._logAnalyticsEvt(t.RecvdInitialize),this._handleBridgeInitialize(e,r,a)):"load"===s?(this._logAnalyticsEvt(t.RecvdLoad),this._handleBridgeLoad(e,r,a)):"loadPaymentReview"===s?(this._logAnalyticsEvt(t.RecvdLoadPaymentReview),this._handleBridgeLoadPaymentReview(e,r,a)):"authorize"===s?(this._logAnalyticsEvt(t.RecvdAuthorize),this._handleBridgeAuthorize(e,r,a)):"reauthorize"===s?(this._logAnalyticsEvt(t.RecvdReauthorize),this._handleBridgeReauthorize(e,r,a)):"finalize"===s?(this._logAnalyticsEvt(t.RecvdFinalize),this._handleBridgeFinalize(e,r,a)):this.sendError(u.UnrecognizedAction,r)}},e.prototype._handleBridgeInitialize=function(e,r,a){if(n.default.debug("Handling mock init."),this._validateRequiredParam(e,r,"clientToken",o.AsString,!1)&&(null!=this._analyticsController&&this._analyticsController.setSessionTokenString(e.params.clientToken),this._validateRequiredParam(e,r,"returnUrl",o.AsString,!1))){this._logAnalyticsEvt(t.ValidatedInitialize);var i={client_token:e.params.clientToken};a.performInitialize(i,this,r)}},e.prototype._handleBridgeLoad=function(e,r,a){if(n.default.debug("Handling mock load."),this._validateRequiredParam(e,r,"paymentMethodCategories",o.AsStringAry,!1)&&this._validateRequiredParam(e,r,"sessionData",o.Base64EncodedObj,!0)&&this._validateRequiredParam(e,r,"sessionDataString",o.AsString,!0)){this._logAnalyticsEvt(t.ValidatedLoad);var s=i.commaSplitString(e.params.paymentMethodCategories);null!=this._analyticsController&&this._analyticsController.setPaymentMethodCategories(e.params.paymentMethodCategories);var l={container:"#payment-container",instance_id:"some-hardcoded-instance-id",payment_method_categories:s},d=this._extractString(e,r,"sessionDataString");null===d&&(d=this._extractBase64(e,r,"sessionData")),a.performLoad(l,d,this,r)}},e.prototype._handleBridgeLoadPaymentReview=function(e,r,a){n.default.debug("Handling mock load payment review."),this._logAnalyticsEvt(t.ValidatedLoadPaymentReview),a.performLoadPaymentReview({container:"#payment-container"},this,r)},e.prototype._handleBridgeAuthorize=function(e,r,a){if(n.default.debug("Handling mock auth."),this._validateRequiredParam(e,r,"autoFinalize",o.AsBoolean,!0)&&this._validateRequiredParam(e,r,"paymentMethodCategories",o.AsStringAry,!1)&&this._validateRequiredParam(e,r,"sessionData",o.Base64EncodedObj,!0)&&this._validateRequiredParam(e,r,"sessionDataString",o.AsString,!0)){this._logAnalyticsEvt(t.ValidatedAuthorize);var i={instance_id:"some-hardcoded-instance-id"};null!=e.params.autoFinalize?i.auto_finalize="true"===e.params.autoFinalize:n.default.debug("autoFinalize is null.");var s=this._extractString(e,r,"sessionDataString");null===s&&(s=this._extractBase64(e,r,"sessionData")),a.performAuthorize(i,s,this,r)}},e.prototype._handleBridgeReauthorize=function(e,r,a){if(n.default.debug("Handling mock reauth."),this._validateRequiredParam(e,r,"paymentMethodCategories",o.AsStringAry,!1)&&this._validateRequiredParam(e,r,"sessionData",o.Base64EncodedObj,!0)&&this._validateRequiredParam(e,r,"sessionDataString",o.AsString,!0)){this._logAnalyticsEvt(t.ValidatedReauthorize);var s={instance_id:"some-hardcoded-instance-id",payment_method_categories:i.commaSplitString(e.params.paymentMethodCategories)},l=this._extractString(e,r,"sessionDataString");null===l&&(l=this._extractBase64(e,r,"sessionData")),a.performReauthorize(s,l,this,r)}},e.prototype._handleBridgeFinalize=function(e,r,a){if(n.default.debug("Handling mock finalize."),this._validateRequiredParam(e,r,"paymentMethodCategories",o.AsStringAry,!1)&&this._validateRequiredParam(e,r,"sessionData",o.Base64EncodedObj,!0)&&this._validateRequiredParam(e,r,"sessionDataString",o.AsString,!0)){this._logAnalyticsEvt(t.ValidatedFinalize);var s={instance_id:"some-hardcoded-instance-id",payment_method_categories:i.commaSplitString(e.params.paymentMethodCategories)},l=this._extractString(e,r,"sessionDataString");null===l&&(l=this._extractBase64(e,r,"sessionData")),a.performFinalize(s,l,this,r)}},e.prototype._extractString=function(e,t,r){try{if(null==e.params[r])return null;var a=e.params[r];return JSON.parse(a)}catch(e){return n.default.error("Error parsing string from message for field ".concat(r,".")),this.sendError(u.ParseStringFailed,t),null}},e.prototype._extractBase64=function(e,t,r){if(null==e.params[r]||"null"===e.params[r])return null;try{var a=e.params[r],i=(new f).parseUtf8Base64(a);return JSON.parse(i)}catch(e){return n.default.error("Error parsing base64 from message for field ".concat(r,".")),this.sendError(u.ParseBase64Failed,t),null}},e.prototype._validateRequiredParam=function(e,t,r,n,a){if(void 0===e.params[r]){if(a)return!0;var s=new c(i.capitalizeString(r)+"UndefinedError","Param "+r+" is undefined.");return this.sendError(s,t),!1}if(null===e.params[r]){if(a)return!0;var l=new c(i.capitalizeString(r)+"NullError","Param "+r+" is null.");return this.sendError(l,t),!1}if(n===o.AsString){if(0==(g=e.params[r]).length){var d=new c("MissingParamError","Param can't be an empty or blank string for "+r+".");return this.sendError(d,t),!1}}else if(n===o.AsStringAry){var u=i.commaSplitString(e.params[r]);if(0==u.length){var p=new c("MissingParamsError","At least one param needs to be provided for "+r+".");return this.sendError(p,t),!1}for(var f=0,h=u;f<h.length;f++)if(0==(g=h[f]).length){var m=new c("EmptyParamError","At least one of the params is an an empty space or a blank string for "+r+".");return this.sendError(m,t),!1}}else if(n==o.AsBoolean){var g;if("true"!==(g=e.params[r])&&"false"!==g){var y=new c("InvalidBoolValueError","Param "+r+" should be encoded as either a string with `true` or `false`.");return this.sendError(y,t),!1}}return!0},e.prototype._logAnalyticsEvt=function(e,t){null!=this._analyticsController&&this._analyticsController.reportEvent(e,t)},e}(),m=function(){function e(e,t){this.reqAction=e,this.resAction=t}return e.ResponseForAction=function(t){var r=i.find(e.PredefinedActions,(function(e){return e.reqAction===t}));return null!=r?r.resAction:null},e.HasResponse=function(e){return null!=this.ResponseForAction(e)},e.PredefinedActions=[new e("handshake","handshakeResponse"),new e("putData","putDataResponse"),new e("getData","getDataResponse"),new e("heightChanged",null),new e("httpRequest","httpResponse"),new e("fullScreenReplaceWebView","fullScreenReplaceWebViewResponse"),new e("fullscreenMoveWebView","fullscreenMoveWebViewResponse"),new e("fullscreenReplaceOverlay","fullscreenReplaceOverlayResponse"),new e("fullscreenRestoreWebView","fullscreenRestoreWebViewResponse"),new e("fullscreenLoadUrl",null),new e("fullscreenLoadHtml",null),new e("fullscreenShow","fullscreenShowResponse"),new e("fullscreenHide","fullscreenHideResponse"),new e("focusScroll",null),new e("showInternalBrowser","showInternalBrowserResponse"),new e("hideInternalBrowser","hideInternalBrowserResponse"),new e("openExternalBrowser",null),new e("testExternalApp","testExternalAppResponse"),new e("openExternalApp","openExternalAppResponse"),new e("toggleLogging",null),new e("logMessage",null)],e}(),g=function(){function e(){var e=this;this._receiverName=null,this._receivedMessages=[],this._sentMessages=[],this._allMessages=[],this._callbacks=[],this._storeAllMessages=!1,this._messageHandler=function(t){n.default.debug("Received message: \n"+JSON.stringify(t,null,2)),e._receivedMessages.push(t),e._storeAllMessages&&e._allMessages.push(t),e._notifyCallbacks(t)}}return Object.defineProperty(e.prototype,"storeAllMessages",{get:function(){return this._storeAllMessages},set:function(e){this._storeAllMessages=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"receiverName",{get:function(){return this._receiverName},enumerable:!1,configurable:!0}),e.prototype.addAsReceiver=function(e){null!=this._receiverName&&n.default.warn("Attempting to re-add as receiver ".concat(e,".")),n.default.debug("Adding as receiver: ".concat(e,".")),window.__KlarnaNativeHook.addReceiver(e,this._messageHandler),this._receiverName=e},e.prototype.removeAsReceiver=function(){window.__KlarnaNativeHook.removeReceiver(this._receiverName,this._messageHandler),this._receiverName=null},e.prototype.sendMessage=function(e,t){var r=this;this._storeAllMessages&&(this._sentMessages.push(e),this._allMessages.push(e)),n.default.debug("Sending message: \n"+JSON.stringify(e,null,2)),window.__KlarnaNativeHook.postMessage(e);var a=m.ResponseForAction(e.action);if(null!=t)if(null!=a)var o=window.setInterval((function(){var n=i.find(r._receivedMessages,(function(t){return t.action===a&&t.messageId===e.messageId}));null!=n&&(t(n),window.clearInterval(o))}),100);else t(null)},e.prototype.sendResizeEvent=function(e){if(null!=this._receiverName){var t=new d("heightChanged",this._receiverName);t.params.height=e.toString(),this.sendMessage(t,null)}},e.prototype.sendHandshake=function(e){if(null!=this._receiverName){var t=new d("handshake",this._receiverName);this.sendMessage(t,e)}else e(null)},e.prototype._notifyCallbacks=function(e){var t=this;this._callbacks.forEach((function(r){r(e,t)}))},e.prototype.addMessageCallback=function(e){this._callbacks.push(e)},e.prototype.removeMessageCallback=function(e){this._callbacks=this._callbacks.filter((function(t){return t!==e}))},e}(),y=r(379),v=r.n(y),_=r(795),b=r.n(_),P=r(569),w=r.n(P),E=r(565),A=r.n(E),z=r(216),R=r.n(z),S=r(589),L=r.n(S),k=r(424),M={};M.styleTagTransform=L(),M.setAttributes=A(),M.insert=w().bind(null,"head"),M.domAPI=b(),M.insertStyleElement=R(),v()(k.Z,M),k.Z&&k.Z.locals&&k.Z.locals,r(449);var C=function(){function e(){this._searchParams=new URLSearchParams(location.search)}return e.prototype.getBoolean=function(e,t){var r=this._searchParams.get(e);return null!=r?"true"===r:t},e.prototype.getString=function(e){return this._searchParams.get(e)},e.prototype.getNumber=function(e,t){var r=this._searchParams.get(e)||"",n=parseInt(r);return isNaN(n)?t:n},e}(),N=function(){function e(e,t){this._analyticsController=e,this._endpoint=t}return e.prototype.loadMessageBridge=function(e){var r=this;n.default.debug("Adding message bridge into page head."),this._analyticsController.reportEvent(t.PerformingAddMessageBridge);var a="MessageBridgeScript";n.default.debug("Creating script element for Message Bridge as #".concat(a,"."));var i=document.createElement("script");i.src="https://".concat(this._endpoint.assetsHost,"/mobile-sdk/mobile-js-snippet/v1/app.min.js"),i.async=!1,i.addEventListener("load",(function(){n.default.debug("Message bridge added."),r._analyticsController.reportEvent(t.MessageBridgeAdded),e(!0)})),i.addEventListener("error",(function(a){n.default.error("Error adding Message bridge.",a),r._analyticsController.reportEvent(t.MessageBridgeLoadError),r.lookForMessageBridge(e)})),i.id=a,document.head.appendChild(i),this._analyticsController.reportEvent(t.PerformedAddMessageBridge)},e.prototype.lookForMessageBridge=function(e){if(null!=window.__KlarnaNativeHook)e(!0);else{var t=this;window.setTimeout((function(){t.lookForMessageBridge(e)}),500)}},e}(),F=function(){function e(){}return e.getEndpoint=function(t){return t&&i.find(e.endpoints,(function(e){return e.name===t.toLowerCase()}))||e.getDefaultEndpoint()},e.getDefaultEndpoint=function(){return e.endpoints[0]},e.endpoints=[{name:"aws",assetsHost:"x.klarnacdn.net",analyticsHost:"eu.klarnaevt.com"},{name:"azure",assetsHost:"z.klarnacdn.net",analyticsHost:"naz.klarnaevt.com"}],e}();window.addEventListener("load",(function(){var r=new C;n.default.level=r.getNumber("loglevel",e.None),n.default.debug("Page loaded. Initializing HTML wrapper.");var a="debug"===r.getString("environment")?"staging":"production",i=F.getEndpoint(r.getString("endpoint")),o=new l(a,i);o.reportEvent(t.PageLoad),new N(o,i).loadMessageBridge((function(e){e&&function(e,r,a){if(null!=window.__KlarnaNativeHook&&window.__KlarnaNativeHook.inSdkWebView()){n.default.debug("Running in SDK."),e.reportEvent(t.SdkFound);var i=r.getBoolean("mockkp",!1),o=r.getBoolean("storeall",!1),s=r.getString("liburl"),l=r.getString("libversion"),d=r.getString("appversion"),c=new h(i,o,e),u=new g,f=new p(s,l,d,a,e);window.__WrapperMessageController=c,o&&(window.__NativeHookController=u),u.storeAllMessages=o,c.initialize(u,f)}else n.default.debug("Not running in SDK."),e.reportEvent(t.SdkNotFound)}(o,r,i)}))}))})()})();</script></head><body><div id="payment-container"></div></body></html>